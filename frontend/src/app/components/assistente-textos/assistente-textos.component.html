<div class="assistente-textos">
  <h2>Assistente de textos (versão com templates)</h2>

  <form (ngSubmit)="gerarTexto()" class="assistente-textos__form">
    <div class="form-row">
      <label for="nome">Nome do beneficiário</label>
      <input id="nome" name="nome" type="text" [(ngModel)]="payload.beneficiario!.nomeCompleto" placeholder="Digite o nome" />
    </div>

    <div class="form-row">
      <label for="dataNascimento">Data de nascimento</label>
      <input id="dataNascimento" name="dataNascimento" type="date" [(ngModel)]="payload.beneficiario!.dataNascimento" />
    </div>

    <div class="form-row">
      <label for="idade">Idade aproximada</label>
      <input id="idade" name="idade" type="number" [(ngModel)]="payload.beneficiario!.idadeAproximada" min="0" />
    </div>

    <div class="form-row">
      <label for="situacao">Situação básica</label>
      <textarea
        id="situacao"
        name="situacao"
        rows="2"
        [(ngModel)]="payload.beneficiario!.situacaoBasica"
        placeholder="Ex.: vulnerabilidade social, acompanhamento psicossocial..."
      ></textarea>
    </div>

    <div class="form-row">
      <label for="tipo">Tipo de texto</label>
      <select id="tipo" name="tipo" [(ngModel)]="payload.tipo">
        <option value="parecer">Parecer</option>
        <option value="relatorio">Relatório</option>
        <option value="plano_atendimento">Plano de atendimento</option>
      </select>
    </div>

    <button type="submit" [disabled]="loading">{{ loading ? 'Gerando...' : 'Gerar texto sugerido' }}</button>
  </form>

  <div *ngIf="error" class="assistente-textos__error">{{ error }}</div>

  <div class="assistente-textos__resultado" *ngIf="textoGerado">
    <div class="assistente-textos__resultado-header">
      <h3>Texto sugerido</h3>
      <small>Você pode editar o conteúdo abaixo livremente.</small>
    </div>
    <textarea rows="8" [(ngModel)]="textoGerado"></textarea>
  </div>
</div>
