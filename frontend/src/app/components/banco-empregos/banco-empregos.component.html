<section class="job-page">
  <header class="page-title">
    <p class="page-title__eyebrow">Atendimentos</p>
    <p class="page-title__label">Banco de Empregos</p>
  </header>

  <div class="tab-shell">
    <p class="tab-shell__title">Navegação por etapas</p>
    <ol class="step-tabs" role="tablist">
      <li
        *ngFor="let tab of tabs; index as idx"
        class="step-tabs__item"
        [class.active]="activeTab === tab.id"
        [class.completed]="idx < activeTabIndex"
      >
        <button
          type="button"
          class="step-tabs__button"
          role="tab"
          [attr.aria-selected]="activeTab === tab.id"
          (click)="changeTab(tab.id)"
        >
          <span class="step-tabs__index" aria-hidden="true">{{ idx + 1 }}</span>
          <span class="step-tabs__label">{{ tab.label }}</span>
        </button>
      </li>
    </ol>
  </div>

  <form [formGroup]="form" class="form-shell">
    <div *ngIf="feedback" class="alert alert-warning">
      <span class="alert__message">{{ feedback }}</span>
      <button type="button" class="alert__close" aria-label="Fechar aviso" (click)="feedback = null">×</button>
    </div>

    <section class="tab-card" *ngIf="activeTab === 'dadosVaga'" formGroupName="dadosVaga">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ tabs[0].label }}</p>
          <p class="muted">Informações principais da vaga.</p>
        </div>
        <div class="nav-buttons" aria-label="Ações da vaga">
          <button type="button" class="nav-button nav-button--print" (click)="print()">
            <span class="nav-button__label">Imprimir dados</span>
          </button>
          <button type="button" class="nav-button" (click)="save()">
            <span class="nav-button__label">Salvar</span>
          </button>
          <button type="button" class="nav-button" (click)="cancel()">
            <span class="nav-button__label">Cancelar</span>
          </button>
          <button type="button" class="nav-button" (click)="startNew()">
            <span class="nav-button__label">Novo</span>
          </button>
          <button type="button" class="nav-button" (click)="close()">
            <span class="nav-button__label">Fechar</span>
          </button>
        </div>
      </div>

      <div class="field-grid cols-2">
        <label class="field full">Título da vaga*
          <input type="text" formControlName="titulo" placeholder="Ex.: Assistente administrativo" />
        </label>
        <label class="field">Status da vaga
          <select formControlName="status">
            <option value="Aberta">Aberta</option>
            <option value="Em andamento">Em andamento</option>
            <option value="Encerrada">Encerrada</option>
          </select>
        </label>
        <label class="field">Data de abertura*
          <input type="date" formControlName="dataAbertura" />
        </label>
        <label class="field">Data de encerramento
          <input type="date" formControlName="dataEncerramento" />
        </label>
        <label class="field">Tipo de contrato
          <input type="text" formControlName="tipoContrato" placeholder="CLT, estágio, temporário..." />
        </label>
        <label class="field">Carga horária
          <input type="text" formControlName="cargaHoraria" placeholder="Ex.: 40h semanais" />
        </label>
        <label class="field">Salário
          <input type="text" formControlName="salario" placeholder="Ex.: R$ 2.500,00" />
        </label>
      </div>
    </section>

    <section class="tab-card" *ngIf="activeTab === 'empresaLocal'" formGroupName="empresaLocal">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ tabs[1].label }}</p>
          <p class="muted">Dados da empresa e local de trabalho.</p>
        </div>
        <div class="nav-buttons" aria-label="Ações da vaga">
          <button type="button" class="nav-button nav-button--print" (click)="print()">
            <span class="nav-button__label">Imprimir dados</span>
          </button>
          <button type="button" class="nav-button" (click)="save()">
            <span class="nav-button__label">Salvar</span>
          </button>
          <button type="button" class="nav-button" (click)="cancel()">
            <span class="nav-button__label">Cancelar</span>
          </button>
          <button type="button" class="nav-button" (click)="startNew()">
            <span class="nav-button__label">Novo</span>
          </button>
          <button type="button" class="nav-button" (click)="close()">
            <span class="nav-button__label">Fechar</span>
          </button>
        </div>
      </div>

      <div class="field-grid cols-2">
        <label class="field full">Nome da empresa
          <input type="text" formControlName="nomeEmpresa" />
        </label>
        <label class="field">CNPJ
          <input type="text" formControlName="cnpj" />
        </label>
        <label class="field">Cidade
          <input type="text" formControlName="cidade" />
        </label>
        <label class="field">Endereço
          <input type="text" formControlName="endereco" />
        </label>
        <label class="field">Bairro
          <input type="text" formControlName="bairro" />
        </label>
      </div>
    </section>

    <section class="tab-card" *ngIf="activeTab === 'requisitos'" formGroupName="requisitos">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ tabs[2].label }}</p>
          <p class="muted">Requisitos, descrição e observações.</p>
        </div>
        <div class="nav-buttons" aria-label="Ações da vaga">
          <button type="button" class="nav-button nav-button--print" (click)="print()">
            <span class="nav-button__label">Imprimir dados</span>
          </button>
          <button type="button" class="nav-button" (click)="save()">
            <span class="nav-button__label">Salvar</span>
          </button>
          <button type="button" class="nav-button" (click)="cancel()">
            <span class="nav-button__label">Cancelar</span>
          </button>
          <button type="button" class="nav-button" (click)="startNew()">
            <span class="nav-button__label">Novo</span>
          </button>
          <button type="button" class="nav-button" (click)="close()">
            <span class="nav-button__label">Fechar</span>
          </button>
        </div>
      </div>

      <div class="field-grid cols-1">
        <label class="field">Requisitos
          <textarea formControlName="requisitos" rows="4" placeholder="Liste os requisitos essenciais"></textarea>
        </label>
        <label class="field">Descrição
          <textarea formControlName="descricao" rows="4" placeholder="Descreva a vaga"></textarea>
        </label>
        <label class="field">Outras observações
          <textarea formControlName="observacoes" rows="3" placeholder="Detalhes adicionais"></textarea>
        </label>
      </div>
    </section>

    <section class="tab-card" *ngIf="activeTab === 'encaminhamentos'">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ tabs[3].label }}</p>
          <p class="muted">Preparado para listar encaminhamentos da vaga.</p>
        </div>
        <div class="nav-buttons" aria-label="Ações da vaga">
          <button type="button" class="nav-button nav-button--print" (click)="print()">
            <span class="nav-button__label">Imprimir dados</span>
          </button>
          <button type="button" class="nav-button" (click)="save()">
            <span class="nav-button__label">Salvar</span>
          </button>
          <button type="button" class="nav-button" (click)="cancel()">
            <span class="nav-button__label">Cancelar</span>
          </button>
          <button type="button" class="nav-button" (click)="startNew()">
            <span class="nav-button__label">Novo</span>
          </button>
          <button type="button" class="nav-button" (click)="close()">
            <span class="nav-button__label">Fechar</span>
          </button>
        </div>
      </div>

      <div class="table-card">
        <div class="table-card__header">
          <p>Encaminhamentos da vaga</p>
          <button type="button" class="nav-button" (click)="save()">Novo encaminhamento</button>
        </div>
        <div class="table-card__table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Beneficiário</th>
                <th>Data de encaminhamento</th>
                <th>Status</th>
                <th>Observações</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of encaminhamentos">
                <td>{{ item.beneficiario }}</td>
                <td>{{ item.data }}</td>
                <td>{{ item.status }}</td>
                <td>{{ item.observacoes }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </form>
</section>
