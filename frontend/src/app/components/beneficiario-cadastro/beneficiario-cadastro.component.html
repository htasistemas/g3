<app-tela-padrao
  [acoes]="acoesToolbar"
  [desabilitado]="acoesDesabilitadas"
  [mostrarFechar]="true"
  (salvar)="submit()"
  (excluir)="handleDeleteSelected()"
  (novo)="startNewBeneficiario()"
  (cancelar)="startNewBeneficiario()"
  (imprimir)="printIndividualRecord()"
  (fechar)="closeForm()"
>
<header class="page-title" slot="titulo">
    <p class="page-title__eyebrow">Benefici&aacute;rio</p>
    <p class="page-title__label">Cadastro de benefici&aacute;rio</p>
  </header>

  <section class="cadastro">
  <ng-template #gestaoRapida>
    <section class="list-panel">
      <div class="list-panel__header">
        <div>
          <p class="list-panel__eyebrow">Gest&atilde;o r&aacute;pida</p>
          <h2>Busque benefici&aacute;rios cadastrados</h2>
          <p>Localize pelo nome, CPF, data de nascimento ou c&oacute;digo e utilize os atalhos para navegar pelas a&ccedil;&otilde;es.</p>
        </div>
        <div class="list-panel__actions">
          <button type="button" class="ghost" (click)="clearSearchFilters()">Limpar filtros</button>
          <button type="button" class="primary" (click)="searchBeneficiaries()">Buscar</button>
        </div>
      </div>

      <div class="list-panel__navigation" aria-label="A&ccedil;&otilde;es r&aacute;pidas para o cadastro">
        <button type="button" class="primary" (click)="startNewBeneficiario()">Incluir</button>
        <button type="button" class="ghost" [disabled]="!selectedBeneficiary" (click)="handleEditSelected()">
          Editar
        </button>
        <button type="button" class="ghost" [disabled]="!selectedBeneficiary" (click)="handleAlterSelected()">
          Alterar
        </button>
        <button
          type="button"
          class="danger"
          [disabled]="!selectedBeneficiary"
          (click)="handleDeleteSelected()"
        >
          Excluir
        </button>
      </div>

      <form [formGroup]="searchForm" class="list-panel__filters" (ngSubmit)="searchBeneficiaries()">
        <label class="field">
          Nome ou apelido
          <input type="text" formControlName="nome" placeholder="Digite parte do nome" />
        </label>
        <label class="field">
          C&oacute;digo
          <input type="text" formControlName="codigo" placeholder="Ex.: 0001" />
        </label>
        <label class="field">
          CPF
          <input type="text" formControlName="cpf" placeholder="Somente n&uacute;meros" />
        </label>
        <label class="field">
          Data de nascimento
          <input type="date" formControlName="data_nascimento" />
        </label>
        <label class="field">
          Status
          <select formControlName="status">
            <option value="">Todos</option>
            <option *ngFor="let option of statusOptions" [value]="option">{{ formatStatusLabel(option) }}</option>
          </select>
        </label>
        <div class="list-panel__filter-actions">
          <button type="submit" class="primary">Aplicar filtros</button>
        </div>
      </form>

      <div *ngIf="listError" class="feedback">
        <span>{{ listError }}</span>
        <button type="button" class="feedback__close" (click)="dismissListError()" aria-label="Fechar aviso">&times;</button>
      </div>
      <div *ngIf="listLoading" class="list-panel__loading">Carregando benefici&aacute;rios...</div>

      <div class="list-panel__table" *ngIf="!listLoading">
        <table>
          <thead>
            <tr>
              <th>Nome</th>
              <th>C&oacute;digo</th>
              <th>CPF</th>
              <th>Nascimento</th>
              <th>Status</th>
              <th class="text-right">A&ccedil;&otilde;es</th>
            </tr>
          </thead>
          <tbody *ngIf="beneficiariosPaginados.length; else emptyList">
            <tr *ngFor="let beneficiario of beneficiariosPaginados">
              <td>{{ beneficiario.nome_completo || beneficiario.nome_social }}</td>
              <td>{{ beneficiario.codigo || '---' }}</td>
              <td>{{ beneficiario.cpf || beneficiario.nis || '---' }}</td>
              <td>{{ beneficiario.data_nascimento ? (beneficiario.data_nascimento | date : 'dd/MM/yyyy') : '---' }}</td>
              <td><span [ngClass]="getStatusClass(beneficiario.status)">{{ formatStatusLabel(beneficiario.status) }}</span></td>
              <td class="text-right actions">
                <button type="button" class="ghost" (click)="onBeneficiarioSelected(beneficiario)">Selecionar</button>
                <button type="button" class="ghost" (click)="editBeneficiario(beneficiario)">Editar</button>
                <button type="button" class="danger" (click)="deleteBeneficiario(beneficiario)">Excluir</button>
              </td>
            </tr>
          </tbody>
        </table>
        <ng-template #emptyList>
          <tbody>
            <tr>
              <td colspan="6" class="list-panel__empty">Nenhum benefici&aacute;rio encontrado com os filtros informados.</td>
            </tr>
          </tbody>
        </ng-template>
      </div>
      <div class="unit-list__pagination" *ngIf="filteredBeneficiarios.length && beneficiariosPaginados.length">
        <span class="unit-list__total">
          Total: {{ filteredBeneficiarios.length }} benefici&aacute;rios
        </span>
        <button type="button" class="btn-outline" (click)="paginaAnterior()" [disabled]="paginaAtual === 1">
          Anterior
        </button>
        <span class="unit-list__page">
          Pagina {{ paginaAtual }} de {{ totalPaginas }}
        </span>
        <button type="button" class="btn-outline" (click)="proximaPagina()" [disabled]="paginaAtual >= totalPaginas">
          Proximo
        </button>
      </div>
    </section>
  </ng-template>

  <div class="tab-shell">
    <p class="tab-shell__title">Navegue pelas informa&ccedil;&otilde;es</p>
    <ol class="step-tabs" role="tablist">
      <li
        *ngFor="let tab of tabs; index as idx"
        class="step-tabs__item"
        [class.active]="activeTab === tab.id"
        [class.completed]="idx < activeTabIndex"
      >
        <button
          class="step-tabs__button"
          type="button"
          role="tab"
          [attr.aria-selected]="activeTab === tab.id"
          (click)="changeTab(tab.id)"
        >
          <span class="step-tabs__index">{{ idx + 1 }}</span>
          <span class="step-tabs__label">{{ tab.label }}</span>
        </button>
      </li>
    </ol>
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()" class="form-shell">
    <app-popup-messages [mensagens]="popupErros" (fechar)="fecharPopupErros()"></app-popup-messages>

    <div *ngIf="feedback" class="feedback">
      <span>{{ feedback }}</span>
      <button type="button" class="feedback__close" (click)="dismissFeedback()" aria-label="Fechar aviso">&times;</button>
    </div>

    <ng-template #navigationControls>
      <div class="tab-actions">
        <button
          type="button"
          class="ghost"
          *ngIf="hasPreviousTab"
          (click)="goToPreviousTab()"
          [disabled]="uploadingDocuments"
        >
          Voltar
        </button>
        <button
          type="button"
          class="primary"
          *ngIf="hasNextTab"
          (click)="goToNextTab()"
          [disabled]="uploadingDocuments"
        >
          Pr&oacute;ximo: {{ nextTabLabel }}
        </button>
        <button type="submit" class="primary" [disabled]="saving || uploadingDocuments" *ngIf="!hasNextTab">
          {{ saving ? 'Salvando...' : uploadingDocuments ? 'Aguardando envios' : 'Salvar cadastro' }}
        </button>
      </div>
    </ng-template>

    <div class="tab-card" *ngIf="activeTab === 'dados'">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ getTabLabel('dados') }}</p>
        </div>
      </div>
      <div class="tab-card__hero" [class.tab-card__hero--camera]="cameraActive">
        <div class="photo-section">
          <div class="photo-preview" [class.photo-preview--empty]="!photoPreview">
            <img *ngIf="photoPreview" [src]="photoPreview" alt="Foto 3x4 do benefici&aacute;rio" />
            <span *ngIf="!photoPreview">Foto 3x4 do benefici&aacute;rio</span>
          </div>
          <div class="photo-actions">
            <label class="upload-btn">
              Enviar foto 3x4
              <input type="file" accept="image/*" (change)="onPhotoSelected($event)" />
            </label>
            <button type="button" class="ghost" (click)="handleCameraCapture()">
              {{ cameraActive ? 'Registrar foto' : 'Capturar pela camera' }}
            </button>
            <button type="button" class="ghost" *ngIf="photoPreview" (click)="removePhoto()">Remover foto</button>
            <button type="button" class="ghost" *ngIf="cameraActive" (click)="stopCamera()">Fechar c&acirc;mera</button>
            <p class="photo-hint">Aceite arquivos enviados ou registre uma nova foto pela webcam.</p>
            <p *ngIf="captureError" class="field-error">{{ captureError }}</p>
          </div>
        </div>

        <div class="camera-panel" *ngIf="cameraActive">
          <p class="camera-panel__title">Visualiza&ccedil;&atilde;o da c&acirc;mera</p>
          <div class="camera-panel__preview">
            <video #videoElement autoplay muted playsinline></video>
          </div>
          <p class="camera-panel__hint">Ajuste o enquadramento e clique em "Registrar foto" para salvar.</p>
        </div>

        <div class="status-panel">
          <p class="status-panel__title">Status do benefici&aacute;rio</p>
          <div class="status-panel__current">
            <span [ngClass]="getStatusClass(form.get('status')?.value)">{{ formatStatusLabel(form.get('status')?.value) }}</span>
            <span class="status-panel__reason" *ngIf="form.get('motivo_bloqueio')?.value">
              Motivo: {{ form.get('motivo_bloqueio')?.value }}
            </span>
          </div>
          <label class="field">
            <span>Atualizar status*</span>
            <select formControlName="status">
              <option *ngFor="let option of statusOptions" [value]="option">{{ formatStatusLabel(option) }}</option>
            </select>
          </label>          <button type="button" class="ghost" *ngIf="form.get('status')?.value === 'BLOQUEADO'" (click)="blockReasonModalOpen = true">
            Editar motivo do bloqueio
          </button>
        </div>
      </div>
      <canvas #canvasElement class="capture-canvas"></canvas>
      <div class="field-grid cols-3 dados-grid" formGroupName="dadosPessoais">
        <label class="field field-matricula">Codigo
          <input [value]="beneficiaryCode || nextSequentialCode" readonly />
        </label>
        <label class="field field-nome-completo">Nome*<input formControlName="nome_completo" placeholder="Digite o nome completo" /></label>

        <label class="field field-social">Nome social<input formControlName="nome_social" placeholder="Se houver" /></label>
        <label class="field field-apelido">Apelido<input formControlName="apelido" placeholder="Como prefere ser chamado" /></label>
        <label class="field field-sexo">Sexo biologico<select formControlName="sexo_biologico">
            <option value="">Selecione</option>
            <option value="MASCULINO">Masculino</option>
            <option value="FEMININO">Feminino</option>
            <option value="OUTRO">Outro</option>
          </select></label>
        <label class="field field-identidade">Identidade de genero<select formControlName="identidade_genero">
            <option value="">Selecione</option>
            <option *ngFor="let option of genderIdentityOptions" [value]="option">{{ option }}</option>
          </select></label>

        <label class="field field-cor">Cor/Raca<select formControlName="cor_raca">
            <option value=""></option>
            <option value="BRANCA">Branca</option>
            <option value="PRETA">Preta</option>
            <option value="PARDA">Parda</option>
            <option value="AMARELA">Amarela</option>
            <option value="INDIGENA">Indigena</option>
            <option value="NAO_INFORMADO">Nao informado</option>
          </select></label>
        <div class="field date-field field-nascimento">
          <label class="field">Data de nascimento*
            <div class="date-age-row">
              <input type="date" formControlName="data_nascimento" />
              <span class="age-badge" *ngIf="beneficiaryAge !== null">{{ beneficiaryAge }} anos</span>
            </div>
          </label>
        </div>
        <label class="field field-estado-civil">Estado civil<select formControlName="estado_civil">
            <option value=""></option>
            <option *ngFor="let option of maritalStatusOptions" [value]="option">{{ option }}</option>
          </select></label>
        <label class="field field-nacionalidade">Nacionalidade<select formControlName="nacionalidade">
            <option value=""></option>
            <option *ngFor="let option of nationalityOptions" [value]="option">{{ option }}</option>
          </select></label>

        <label class="field field-naturalidade">Naturalidade (cidade)<input formControlName="naturalidade_cidade" /></label>
        <label class="field field-uf">Estado<select formControlName="naturalidade_uf">
            <option value="">Selecione o estado</option>
            <option *ngFor="let uf of brazilianStates" [value]="uf">{{ uf }}</option>
          </select></label>

        <label class="field field-mae">Nome da mae*<input formControlName="nome_mae" /></label>
        <label class="field field-pai">Nome do pai<input formControlName="nome_pai" /></label>
      </div>

      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
  </div>

    <div class="tab-card" *ngIf="activeTab === 'endereco'" formGroupName="endereco">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ getTabLabel('endereco') }}</p>
          <p class="muted">Localiza&ccedil;&atilde;o completa para correspond&ecirc;ncias e visitas.</p>
        </div>
</div>
      <div class="field-grid cols-3 endereco-grid">
        <label class="field field-cep">CEP*<input formControlName="cep" placeholder="00000-000" (input)="onCepInput($event)" (blur)="onCepBlur()" />
          <p class="field-error" *ngIf="form.get(['endereco', 'cep'])?.invalid && form.get(['endereco', 'cep'])?.touched">
            Informe um CEP v&aacute;lido com 8 d&iacute;gitos.</p>
          <p class="field-error" *ngIf="cepLookupError">{{ cepLookupError }}</p>
        </label>
        <label class="field field-logradouro">Endere&ccedil;o<input formControlName="logradouro" /></label>
        <label class="field field-numero">N&uacute;mero<input formControlName="numero" /></label>
        <label class="field field-complemento">Complemento<input formControlName="complemento" /></label>
        <label class="field field-bairro">Bairro<input formControlName="bairro" /></label>
        <label class="field field-ponto">Ponto de refer&ecirc;ncia<input formControlName="ponto_referencia" /></label>
        <label class="field field-municipio">Munic&iacute;pio<input formControlName="municipio" /></label>
        <label class="field field-zona">Zona<select formControlName="zona">
            <option value="URBANA">Urbana</option>
            <option value="RURAL">Rural</option>
          </select></label>
        <label class="field field-subzona">Subzona<select formControlName="subzona">
            <option value="">Selecione...</option>
            <option value="ZONA NORTE">Zona Norte</option>
            <option value="ZONA SUL">Zona Sul</option>
            <option value="ZONA LESTE">Zona Leste</option>
            <option value="ZONA OESTE">Zona Oeste</option>
            <option value="ZONA CENTRAL">Zona Central</option>
          </select></label>
        <label class="field field-uf-endereco">Estado<input maxlength="2" formControlName="uf" /></label>
      </div>
      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>

    <div class="tab-card" *ngIf="activeTab === 'contato'" formGroupName="contato">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ getTabLabel('contato') }}</p>
          <p class="muted">Localiza&ccedil;&atilde;o completa para correspond&ecirc;ncias e visitas.</p>
        </div>
      </div>
        <div class="field-grid cols-2">
          <label class="field">
            <span>Telefone principal*</span>
            <div class="contact-row">
              <input
                formControlName="telefone_principal"
                placeholder="(00) 00000-0000"
                (input)="onPhoneInput($event, 'telefone_principal')"
              />
              <div
                class="contact-actions"
                *ngIf="
                  form.get(['contato', 'permite_contato_tel'])?.value ||
                  form.get(['contato', 'permite_contato_whatsapp'])?.value ||
                  form.get(['contato', 'permite_contato_sms'])?.value
                "
              >
                <button
                  type="button"
                  class="contact-actions__button"
                  *ngIf="form.get(['contato', 'permite_contato_tel'])?.value"
                  (click)="startCall('telefone_principal')"
                  [disabled]="!hasPhoneValue('telefone_principal')"
                  aria-label="Ligar para telefone principal"
                  title="Ligar"
                >
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.02-.24 11.72 11.72 0 003.68.59 1 1 0 011 1v3.5a1 1 0 01-1 1A17.5 17.5 0 012.5 3a1 1 0 011-1H7a1 1 0 011 1 11.72 11.72 0 00.59 3.68 1 1 0 01-.24 1.02l-2.2 2.09z"
                      fill="currentColor"
                    />
                  </svg>
                </button>
                <button
                  type="button"
                  class="contact-actions__button contact-actions__button--whatsapp"
                  *ngIf="form.get(['contato', 'permite_contato_whatsapp'])?.value"
                  (click)="openWhatsapp('telefone_principal')"
                  [disabled]="!hasPhoneValue('telefone_principal')"
                  aria-label="Abrir WhatsApp para telefone principal"
                  title="WhatsApp"
                >
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M12 2.25a9.75 9.75 0 00-8.51 14.48L2.2 21.8a.75.75 0 001 .93l5.08-1.74A9.75 9.75 0 1012 2.25zm0 1.5a8.25 8.25 0 110 16.5 8.18 8.18 0 01-3.74-.9l-.26-.13-3.05 1.04 1.03-2.88-.14-.24A8.25 8.25 0 0112 3.75zm-3.02 3.5c-.14 0-.35.05-.54.21-.22.18-.71.69-.71 1.68 0 1 .73 1.96.83 2.1.1.14 1.43 2.28 3.53 3.22 1.79.79 2.15.72 2.54.67.39-.05 1.26-.51 1.44-1 .18-.49.18-.91.13-1-.05-.09-.2-.15-.42-.26-.22-.1-1.3-.64-1.5-.71-.2-.08-.35-.11-.5.11-.15.23-.58.71-.72.86-.14.15-.27.17-.5.06-.23-.11-.97-.36-1.86-1.14a6.37 6.37 0 01-1.18-1.47c-.13-.22 0-.33.1-.44.1-.11.23-.27.35-.4.12-.13.15-.22.23-.36.08-.14.04-.26-.02-.36-.06-.1-.5-1.22-.69-1.68-.18-.44-.36-.38-.5-.39z"
                      fill="currentColor"
                    />
                  </svg>
                </button>
                <button
                  type="button"
                  class="contact-actions__button contact-actions__button--sms"
                  *ngIf="form.get(['contato', 'permite_contato_sms'])?.value"
                  (click)="sendSms('telefone_principal')"
                  [disabled]="!hasPhoneValue('telefone_principal')"
                  aria-label="Enviar SMS para telefone principal"
                  title="SMS"
                >
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M4 4h16a1 1 0 011 1v10a1 1 0 01-1 1H8.41L5 19.92V16H4a1 1 0 01-1-1V5a1 1 0 011-1zm1 2v8h1a1 1 0 011 1v1.38L9.62 15H19V6H5zm3 2h8a1 1 0 110 2H8a1 1 0 110-2zm0 3h5a1 1 0 110 2H8a1 1 0 110-2z"
                      fill="currentColor"
                    />
                  </svg>
                </button>
              </div>
            </div>
            <p class="field-error" *ngIf="form.get(['contato', 'telefone_principal'])?.invalid && form.get(['contato', 'telefone_principal'])?.touched">
              Informe o telefone principal.
            </p>
          </label>
          <label class="field">
            <span>Telefone secund&aacute;rio</span>
            <div class="contact-row">
              <input
                formControlName="telefone_secundario"
                placeholder="(00) 00000-0000"
                (input)="onPhoneInput($event, 'telefone_secundario')"
              />
              <div
                class="contact-actions"
                *ngIf="
                  form.get(['contato', 'permite_contato_tel'])?.value ||
                  form.get(['contato', 'permite_contato_whatsapp'])?.value ||
                  form.get(['contato', 'permite_contato_sms'])?.value
                "
              >
                <button
                  type="button"
                  class="contact-actions__button"
                  *ngIf="form.get(['contato', 'permite_contato_tel'])?.value"
                  (click)="startCall('telefone_secundario')"
                  [disabled]="!hasPhoneValue('telefone_secundario')"
                  aria-label="Ligar para telefone secund&aacute;rio"
                  title="Ligar"
                >
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.02-.24 11.72 11.72 0 003.68.59 1 1 0 011 1v3.5a1 1 0 01-1 1A17.5 17.5 0 012.5 3a1 1 0 011-1H7a1 1 0 011 1 11.72 11.72 0 00.59 3.68 1 1 0 01-.24 1.02l-2.2 2.09z"
                      fill="currentColor"
                    />
                  </svg>
                </button>
                <button
                  type="button"
                  class="contact-actions__button contact-actions__button--whatsapp"
                  *ngIf="form.get(['contato', 'permite_contato_whatsapp'])?.value"
                  (click)="openWhatsapp('telefone_secundario')"
                  [disabled]="!hasPhoneValue('telefone_secundario')"
                  aria-label="Abrir WhatsApp para telefone secund&aacute;rio"
                  title="WhatsApp"
                >
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M12 2.25a9.75 9.75 0 00-8.51 14.48L2.2 21.8a.75.75 0 001 .93l5.08-1.74A9.75 9.75 0 1012 2.25zm0 1.5a8.25 8.25 0 110 16.5 8.18 8.18 0 01-3.74-.9l-.26-.13-3.05 1.04 1.03-2.88-.14-.24A8.25 8.25 0 0112 3.75zm-3.02 3.5c-.14 0-.35.05-.54.21-.22.18-.71.69-.71 1.68 0 1 .73 1.96.83 2.1.1.14 1.43 2.28 3.53 3.22 1.79.79 2.15.72 2.54.67.39-.05 1.26-.51 1.44-1 .18-.49.18-.91.13-1-.05-.09-.2-.15-.42-.26-.22-.1-1.3-.64-1.5-.71-.2-.08-.35-.11-.5.11-.15.23-.58.71-.72.86-.14.15-.27.17-.5.06-.23-.11-.97-.36-1.86-1.14a6.37 6.37 0 01-1.18-1.47c-.13-.22 0-.33.1-.44.1-.11.23-.27.35-.4.12-.13.15-.22.23-.36.08-.14.04-.26-.02-.36-.06-.1-.5-1.22-.69-1.68-.18-.44-.36-.38-.5-.39z"
                      fill="currentColor"
                    />
                  </svg>
                </button>
                <button
                  type="button"
                  class="contact-actions__button contact-actions__button--sms"
                  *ngIf="form.get(['contato', 'permite_contato_sms'])?.value"
                  (click)="sendSms('telefone_secundario')"
                  [disabled]="!hasPhoneValue('telefone_secundario')"
                  aria-label="Enviar SMS para telefone secund&aacute;rio"
                  title="SMS"
                >
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M4 4h16a1 1 0 011 1v10a1 1 0 01-1 1H8.41L5 19.92V16H4a1 1 0 01-1-1V5a1 1 0 011-1zm1 2v8h1a1 1 0 011 1v1.38L9.62 15H19V6H5zm3 2h8a1 1 0 110 2H8a1 1 0 110-2zm0 3h5a1 1 0 110 2H8a1 1 0 110-2z"
                      fill="currentColor"
                    />
                  </svg>
                </button>
              </div>
            </div>
          </label>
          <label class="checkbox-field"><input type="checkbox" formControlName="telefone_principal_whatsapp" /> <span>Telefone principal tem WhatsApp</span></label>
          <label class="field">Nome para recado<input formControlName="telefone_recado_nome" /></label>
          <label class="field">
            <span>Telefone para recado</span>
            <div class="contact-row">
              <input
                formControlName="telefone_recado_numero"
                placeholder="(00) 00000-0000"
                (input)="onPhoneInput($event, 'telefone_recado_numero')"
              />
              <div
                class="contact-actions"
                *ngIf="
                  form.get(['contato', 'permite_contato_tel'])?.value ||
                  form.get(['contato', 'permite_contato_whatsapp'])?.value
                "
              >
                <button
                  type="button"
                  class="contact-actions__button"
                  *ngIf="form.get(['contato', 'permite_contato_tel'])?.value"
                  (click)="startCall('telefone_recado_numero')"
                  [disabled]="!hasPhoneValue('telefone_recado_numero')"
                  aria-label="Ligar para telefone de recado"
                  title="Ligar"
                >
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.02-.24 11.72 11.72 0 003.68.59 1 1 0 011 1v3.5a1 1 0 01-1 1A17.5 17.5 0 012.5 3a1 1 0 011-1H7a1 1 0 011 1 11.72 11.72 0 00.59 3.68 1 1 0 01-.24 1.02l-2.2 2.09z"
                      fill="currentColor"
                    />
                  </svg>
                </button>
                <button
                  type="button"
                  class="contact-actions__button contact-actions__button--whatsapp"
                  *ngIf="form.get(['contato', 'permite_contato_whatsapp'])?.value"
                  (click)="openWhatsapp('telefone_recado_numero')"
                  [disabled]="!hasPhoneValue('telefone_recado_numero')"
                  aria-label="Abrir WhatsApp para telefone de recado"
                  title="WhatsApp"
                >
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M12 2.25a9.75 9.75 0 00-8.51 14.48L2.2 21.8a.75.75 0 001 .93l5.08-1.74A9.75 9.75 0 1012 2.25zm0 1.5a8.25 8.25 0 110 16.5 8.18 8.18 0 01-3.74-.9l-.26-.13-3.05 1.04 1.03-2.88-.14-.24A8.25 8.25 0 0112 3.75zm-3.02 3.5c-.14 0-.35.05-.54.21-.22.18-.71.69-.71 1.68 0 1 .73 1.96.83 2.1.1.14 1.43 2.28 3.53 3.22 1.79.79 2.15.72 2.54.67.39-.05 1.26-.51 1.44-1 .18-.49.18-.91.13-1-.05-.09-.2-.15-.42-.26-.22-.1-1.3-.64-1.5-.71-.2-.08-.35-.11-.5.11-.15.23-.58.71-.72.86-.14.15-.27.17-.5.06-.23-.11-.97-.36-1.86-1.14a6.37 6.37 0 01-1.18-1.47c-.13-.22 0-.33.1-.44.1-.11.23-.27.35-.4.12-.13.15-.22.23-.36.08-.14.04-.26-.02-.36-.06-.1-.5-1.22-.69-1.68-.18-.44-.36-.38-.5-.39z"
                      fill="currentColor"
                    />
                  </svg>
                </button>
              </div>
            </div>
          </label>
          <label class="field">
            <span>Email</span>
            <div class="contact-row">
              <input type="email" formControlName="email" />
              <div class="contact-actions" *ngIf="form.get(['contato', 'permite_contato_email'])?.value">
                <button
                  type="button"
                  class="contact-actions__button contact-actions__button--email"
                  (click)="openEmailClient()"
                  [disabled]="!form.get(['contato', 'email'])?.value"
                  aria-label="Abrir cliente de e-mail"
                  title="E-mail"
                >
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M4 5h16a1 1 0 011 1v12a1 1 0 01-1 1H4a1 1 0 01-1-1V6a1 1 0 011-1zm1.25 2l6.25 4.35L17.75 7H5.25zM19 17V9.74l-7.09 4.94a1 1 0 01-1.14 0L3 9.74V17h16z"
                      fill="currentColor"
                    />
                  </svg>
                </button>
              </div>
            </div>
            <p class="field-error" *ngIf="form.get(['contato', 'email'])?.invalid && form.get(['contato', 'email'])?.touched">
              Informe um e-mail v&aacute;lido.
            </p>
          </label>
          <label class="field">Hor&aacute;rio preferencial<select formControlName="horario_preferencial_contato">
              <option value="">Selecione um hor&aacute;rio</option>
              <option *ngFor="let option of preferredContactOptions" [value]="option.value">{{ option.label }}</option>
            </select></label>
          <div class="feature-grid">
            <label class="checkbox-field"><input type="checkbox" formControlName="permite_contato_tel" /> <span>Permite contato telef&ocirc;nico</span></label>
            <label class="checkbox-field"><input type="checkbox" formControlName="permite_contato_whatsapp" /> <span>Permite WhatsApp</span></label>
            <label class="checkbox-field"><input type="checkbox" formControlName="permite_contato_sms" /> <span>Permite SMS</span></label>
            <label class="checkbox-field"><input type="checkbox" formControlName="permite_contato_email" /> <span>Permite e-mail</span></label>
          </div>
      </div>
      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>

    <div class="tab-card" *ngIf="activeTab === 'documentos'" formGroupName="documentos">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ getTabLabel('documentos') }}</p>
          <p class="muted">Localiza&ccedil;&atilde;o completa para correspond&ecirc;ncias e visitas.</p>
        </div>
      </div>
      <div class="field-grid cols-3">
        <label class="field">CPF*<input formControlName="cpf" (input)="onCpfInput($event)" />
          <p class="field-error" *ngIf="form.get(['documentos', 'cpf'])?.invalid && form.get(['documentos', 'cpf'])?.touched">
            Informe um CPF v&aacute;lido.
          </p>
        </label>
        <label class="field">RG n&uacute;mero<input formControlName="rg_numero" /></label>
        <label class="field">&Oacute;rg&atilde;o emissor<input formControlName="rg_orgao_emissor" /></label>
        <label class="field">Estado<input maxlength="2" formControlName="rg_uf" /></label>
        <label class="field">Data emiss&atilde;o<input type="date" formControlName="rg_data_emissao" /></label>
        <label class="field">NIS<input formControlName="nis" /></label>
        <label class="field">Certid&atilde;o tipo<input formControlName="certidao_tipo" /></label>
        <label class="field">Livro<input formControlName="certidao_livro" /></label>
        <label class="field">Folha<input formControlName="certidao_folha" /></label>
        <label class="field">Termo<input formControlName="certidao_termo" /></label>
        <label class="field">Cart&oacute;rio<input formControlName="certidao_cartorio" /></label>
        <label class="field">Munic&iacute;pio<input formControlName="certidao_municipio" /></label>
        <label class="field">Estado<input maxlength="2" formControlName="certidao_uf" /></label>
        <label class="field">T&iacute;tulo de eleitor<input formControlName="titulo_eleitor" /></label>
        <label class="field">CNH<input formControlName="cnh" /></label>
        <label class="field">Cart&atilde;o SUS<input formControlName="cartao_sus" /></label>
      </div>
      <div class="document-section" formArrayName="anexos">
        <div class="document-request">
          <div class="document-request__header">
            <div>
              <p class="document-request__title">Envie seus Documentos</p>
              <p class="document-request__subtitle">Por favor, envie seus documentos para completar seu cadastro.</p>
            </div>
            <button type="button" class="ghost" (click)="addOptionalDocument()">Adicionar documento opcional</button>
          </div>
          <p class="upload-hint" *ngIf="uploadingDocuments">
            Aguarde o envio dos documentos selecionados para continuar.
          </p>
          <div class="document-request__list">
            <div
              class="document-request__card"
              *ngFor="let control of anexos.controls; index as i"
              [formGroupName]="i"
              [class.document-request__card--alert]="
                control.get('obrigatorio')?.value &&
                !control.get('nomeArquivo')?.value &&
                !control.get('conteudo')?.value
              "
            >
              <div class="document-request__icon" aria-hidden="true">
                <svg width="34" height="34" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M7 4h7l4 4v12a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1z"
                    stroke="currentColor"
                    stroke-width="1.5"
                  />
                  <path d="M14 4v4h4" stroke="currentColor" stroke-width="1.5" />
                  <path d="M8 13h8M8 16h6" stroke="currentColor" stroke-width="1.5" />
                </svg>
              </div>
              <div class="document-request__content">
                <div class="document-request__title-row">
                  <ng-container *ngIf="control.get('obrigatorio')?.value; else editableName">
                    <p class="document-request__name">{{ control.get('nome')?.value }}</p>
                  </ng-container>
                  <ng-template #editableName>
                    <input class="document-request__name-input" formControlName="nome" />
                  </ng-template>
                  <span *ngIf="control.get('obrigatorio')?.value" class="pill">Obrigat&oacute;rio</span>
                </div>
                <p class="document-request__description">
                  {{ control.get('nomeArquivo')?.value ? 'Arquivo anexado para conferencia.' : 'Envie a foto do documento solicitado.' }}
                </p>
                <p class="document-request__status">
                  {{ control.get('nomeArquivo')?.value || 'Nenhum arquivo selecionado' }}
                </p>
                <div class="document-request__actions">
                  <label class="upload-btn upload-btn--primary">
                    Enviar arquivo
                    <input type="file" (change)="onDocumentFileSelected($event, i)" />
                  </label>
                  <button
                    type="button"
                    class="ghost"
                    *ngIf="control.get('conteudo')?.value"
                    (click)="viewDocument(i)"
                  >
                    Visualizar
                  </button>
                  <button
                    type="button"
                    class="ghost destructive"
                    *ngIf="control.get('nomeArquivo')?.value || control.get('conteudo')?.value"
                    (click)="removeUploadedDocument(i)"
                  >
                    Remover
                  </button>
                </div>
                <div class="upload-progress" *ngIf="uploadProgress[i] !== undefined">
                  <div
                    class="upload-progress__bar"
                    [style.width]="uploadProgress[i] + '%'"
                    [class.upload-progress__bar--complete]="uploadProgress[i] === 100"
                  ></div>
                  <p class="upload-progress__label">
                    {{ uploadProgress[i] === 100 ? 'Envio concluido' : 'Enviando documento...' }}
                    ({{ uploadProgress[i] }}%)
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="document-request__footer">
            <p class="document-request__note">Formatos aceitos: JPG, PNG ou PDF. Tamanho m&aacute;ximo: 5MB.</p>
            <button type="button" class="primary" (click)="confirmDocuments()">Enviar documentos</button>
          </div>
        </div>
        <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
      </div>
    </div>

    <div class="tab-card" *ngIf="activeTab === 'familiar'" formGroupName="familiar">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ getTabLabel('familiar') }}</p>
          <p class="muted">Localiza&ccedil;&atilde;o completa para correspond&ecirc;ncias e visitas.</p>
        </div>
      </div>
      <div class="field-grid cols-2">
        <label class="checkbox-field"><input type="checkbox" formControlName="mora_com_familia" /> <span>Mora com a fam&iacute;lia</span></label>
        <label class="checkbox-field"><input type="checkbox" formControlName="responsavel_legal" /> <span>Respons&aacute;vel legal</span></label>
        <label class="field">V&iacute;nculo familiar<input formControlName="vinculo_familiar" /></label>
        <label class="field">Composi&ccedil;&atilde;o familiar<textarea formControlName="composicao_familiar"></textarea></label>
        <label class="field">Crian&ccedil;as/adolescentes no domic&iacute;lio<input type="number" formControlName="criancas_adolescentes" /></label>
        <label class="field">Idosos no domic&iacute;lio<input type="number" formControlName="idosos" /></label>
        <label class="checkbox-field"><input type="checkbox" formControlName="acompanhamento_cras" /> <span>Em acompanhamento do CRAS/CREAS</span></label>
        <label class="checkbox-field"><input type="checkbox" formControlName="acompanhamento_saude" /> <span>Em acompanhamento pela sa&uacute;de (e-SUS)</span></label>
        <label class="field">Participa&ccedil;&atilde;o comunit&aacute;ria<input formControlName="participa_comunidade" placeholder="Conselhos, grupos, coletivos" /></label>
        <label class="field">Rede de apoio<textarea formControlName="rede_apoio" placeholder="Institui&ccedil;&otilde;es, vizinhos, familiares"></textarea></label>
        <label class="field full">Situa&ccedil;&atilde;o de vulnerabilidade<textarea formControlName="situacao_vulnerabilidade"></textarea></label>
      </div>
      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>

    <div class="tab-card" *ngIf="activeTab === 'escolaridade'" formGroupName="escolaridade">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ getTabLabel('escolaridade') }}</p>
          <p class="muted">Localiza&ccedil;&atilde;o completa para correspond&ecirc;ncias e visitas.</p>
        </div>
      </div>
      <div class="field-grid cols-3">
        <label class="checkbox-field"><input type="checkbox" formControlName="sabe_ler_escrever" /> <span>Sabe ler e escrever</span></label>
        <label class="field">N&iacute;vel de escolaridade<select formControlName="nivel_escolaridade">
            <option value="">Selecione</option>
            <option *ngFor="let option of educationLevelOptions" [value]="option">{{ option }}</option>
          </select></label>
        <label class="checkbox-field"><input type="checkbox" formControlName="estuda_atualmente" /> <span>Estuda atualmente</span></label>
        <label class="field">Ocupa&ccedil;&atilde;o
          <input
            formControlName="ocupacao"
            placeholder="Informe a ocupa&ccedil;&atilde;o"
          />
        </label>
        <label class="field">Situa&ccedil;&atilde;o de trabalho<input formControlName="situacao_trabalho" /></label>
        <label class="field">Local de trabalho<input formControlName="local_trabalho" /></label>
        <label class="field">Renda mensal
          <input
            type="text"
            formControlName="renda_mensal"
            (input)="formatCurrency($event, 'escolaridade', 'renda_mensal')"
            placeholder="R$ 0,00"
          />
        </label>
        <label class="field">Fonte de renda<input formControlName="fonte_renda" /></label>
      </div>
      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>

    <div class="tab-card" *ngIf="activeTab === 'saude'" formGroupName="saude">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ getTabLabel('saude') }}</p>
          <p class="muted">Localiza&ccedil;&atilde;o completa para correspond&ecirc;ncias e visitas.</p>
        </div>
      </div>
      <div class="field-grid cols-2">
        <label class="checkbox-field"><input type="checkbox" formControlName="possui_deficiencia" /> <span>Possui defici&ecirc;ncia</span></label>
        <label class="field">Tipo de defici&ecirc;ncia<input formControlName="tipo_deficiencia" /></label>
        <label class="field">CID principal<input formControlName="cid_principal" /></label>
        <label class="checkbox-field"><input type="checkbox" formControlName="usa_medicacao_continua" /> <span>Usa medica&ccedil;&atilde;o cont&iacute;nua</span></label>
        <label class="field full">Descri&ccedil;&atilde;o da medica&ccedil;&atilde;o<textarea formControlName="descricao_medicacao"></textarea></label>
        <label class="field">Servi&ccedil;o de sa&uacute;de de refer&ecirc;ncia<input formControlName="servico_saude_referencia" /></label>
      </div>
      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>

    <div class="tab-card" *ngIf="activeTab === 'beneficios'" formGroupName="beneficios">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ getTabLabel('beneficios') }}</p>
          <p class="muted">Localiza&ccedil;&atilde;o completa para correspond&ecirc;ncias e visitas.</p>
        </div>
      </div>
      <div class="field-grid cols-2">
        <label class="checkbox-field"><input type="checkbox" formControlName="recebe_beneficio" /> <span>Recebe benef&iacute;cio</span></label>
        <label class="field">Valor total
          <input type="text" formControlName="valor_total_beneficios" (input)="formatCurrency($event)" placeholder="R$ 0,00" />
        </label>
        <div class="field full">
          <p class="field-title">Benef&iacute;cios recebidos</p>
          <div class="chips">
            <label *ngFor="let benefit of availableBenefits" class="chip">
              <input type="checkbox" [checked]="selectionChecked(benefit)" (change)="toggleBenefit(benefit)" />
              <span>{{ benefit }}</span>
            </label>
          </div>
        </div>
        <label class="field full">Descri&ccedil;&atilde;o dos benef&iacute;cios<textarea formControlName="beneficios_descricao"></textarea></label>
      </div>
      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>

    <div class="tab-card" *ngIf="activeTab === 'observacoes'" formGroupName="observacoes">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ getTabLabel('observacoes') }}</p>
          <p class="muted">Localiza&ccedil;&atilde;o completa para correspond&ecirc;ncias e visitas.</p>
        </div>
      </div>
      <div class="field-grid cols-2">
        <label class="field">Data do aceite<input type="datetime-local" formControlName="data_aceite_lgpd" /></label>
        <label class="checkbox-field"><input type="checkbox" formControlName="aceite_lgpd" (change)="handleLgpdToggle($event)" /> <span>Aceite LGPD*</span></label>
        <label class="field full">Observa&ccedil;&otilde;es<textarea formControlName="observacoes"></textarea></label>
        <p class="field-error full-span" *ngIf="form.get(['observacoes', 'aceite_lgpd'])?.invalid && form.get(['observacoes', 'aceite_lgpd'])?.touched">
          Confirme o aceite LGPD para continuar.
        </p>
      </div>
      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>
  
    <div class="tab-card" *ngIf="activeTab === 'lista'">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">benefici&aacute;rios cadastrados</p>
          <p class="muted">Localiza&ccedil;&atilde;o completa para correspond&ecirc;ncias e visitas.</p>
        </div>
      </div>

      <form [formGroup]="searchForm" class="list-filters" (ngSubmit)="searchBeneficiaries()">
        <label class="field">Nome
          <input type="text" formControlName="nome" placeholder="Digite parte do nome" />
        </label>
        <label class="field">CPF
          <input type="text" formControlName="cpf" placeholder="Somente numeros" />
        </label>
        <label class="field">Codigo
          <input type="text" formControlName="codigo" placeholder="Ex.: 0001" />
        </label>
        <label class="field">Nascimento
          <input type="date" formControlName="data_nascimento" />
        </label>
        <div class="list-filters__actions">
          <button type="button" class="btn-outline" (click)="clearSearchFilters()">Limpar</button>
          <button type="submit" class="btn-outline">Buscar</button>
        </div>
      </form>

      <div class="unit-active" *ngIf="selectedBeneficiary">
        <div>
          <p class="unit-active__eyebrow">benefici&aacute;rio ativo</p>
          <p class="unit-active__name">{{ selectedBeneficiary.nome_completo || selectedBeneficiary.nome_social || 'benefici&aacute;rio sem nome' }}</p>
          <p class="unit-active__meta">
            {{ selectedBeneficiary.cpf || 'CPF nao informado' }} - {{ selectedBeneficiary.data_nascimento || 'Data nao informada' }}
          </p>
        </div>
        <button type="button" class="btn-outline btn-small" (click)="selecionarBeneficiarioNaLista(selectedBeneficiary)">
          Editar
        </button>
      </div>

      <div class="unit-list" *ngIf="beneficiariosPaginados.length">
        <div class="unit-list__item" *ngFor="let beneficiario of beneficiariosPaginados">
          <div>
            <p class="unit-list__name">{{ beneficiario.nome_completo || beneficiario.nome_social || 'benefici&aacute;rio sem nome' }}</p>
            <p class="unit-list__meta">
              {{ beneficiario.cpf || 'CPF nao informado' }} - {{ beneficiario.data_nascimento || 'Data nao informada' }}
            </p>
          </div>
          <div class="unit-list__actions">
            <button type="button" class="btn-outline btn-small" (click)="selecionarBeneficiarioNaLista(beneficiario)">
              Editar
            </button>
          </div>
        </div>
      </div>

      <div class="unit-list__pagination" *ngIf="filteredBeneficiarios.length && beneficiariosPaginados.length">
        <span class="unit-list__total">
          Total: {{ filteredBeneficiarios.length }} benefici&aacute;rios
        </span>
        <button type="button" class="btn-outline" (click)="paginaAnterior()" [disabled]="paginaAtual === 1">
          Anterior
        </button>
        <span class="unit-list__page">
          Pagina {{ paginaAtual }} de {{ totalPaginas }}
        </span>
        <button type="button" class="btn-outline" (click)="proximaPagina()" [disabled]="paginaAtual >= totalPaginas">
          Proximo
        </button>
      </div>

      <p class="muted" *ngIf="!filteredBeneficiarios.length">Nenhum benefici&aacute;rio cadastrado ate o momento.</p>
    </div>
  </form>

  <div class="modal" *ngIf="quickSearchModalOpen">
    <div class="modal__backdrop" (click)="closeQuickSearch()"></div>
    <div class="modal__content modal__content--wide">
      <div class="modal__header">
        <div>
          <p class="modal__eyebrow">Gest&atilde;o r&aacute;pida</p>
          <h3>Buscar benefici&aacute;rio</h3>
        </div>
        <button type="button" class="ghost" (click)="closeQuickSearch()">Fechar</button>
      </div>
      <ng-container *ngTemplateOutlet="gestaoRapida"></ng-container>
    </div>
  </div>

  <div class="modal" *ngIf="blockReasonModalOpen">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <h3>Motivo do bloqueio</h3>
      <p class="muted">Localiza&ccedil;&atilde;o completa para correspond&ecirc;ncias e visitas.</p>
        <textarea [formControl]="motivoBloqueioControl" rows="4"></textarea>
      <p *ngIf="blockReasonError" class="field-error">{{ blockReasonError }}</p>
      <div class="modal__actions">
        <button type="button" class="ghost" (click)="cancelBlockReason()">Cancelar</button>
        <button type="button" class="primary" (click)="confirmBlockReason()">Salvar motivo</button>
      </div>
    </div>
  </div>

  <div class="modal" *ngIf="pdfErrorDialogOpen">
    <div class="modal__backdrop" (click)="closePdfErrorDialog()"></div>
    <div class="modal__content">
      <div class="modal__header">
        <div>
          <p class="modal__eyebrow">Erro</p>
          <h3>Falha ao carregar documento PDF.</h3>
        </div>
        <button type="button" class="ghost" (click)="closePdfErrorDialog()" aria-label="Fechar aviso">&times;</button>
      </div>
      <p>{{ pdfErrorMessage || 'N&atilde;o foi poss&iacute;vel gerar o termo de autoriza&ccedil;&atilde;o.' }}</p>
      <div class="modal__actions">
        <button type="button" class="ghost" (click)="closePdfErrorDialog()">Fechar</button>
        <button type="button" class="primary" (click)="retryAuthorizationTerm()">Recarregar</button>
      </div>
    </div>
  </div>

  <div class="modal" *ngIf="missingFieldsModalOpen">
    <div class="modal__backdrop" (click)="closeMissingFieldsModal()"></div>
    <div class="modal__content">
      <div class="modal__header">
        <div>
          <p class="modal__eyebrow">Campos obrigat&oacute;rios</p>
          <h3>Complete os itens para ativar o cadastro</h3>
        </div>
        <button type="button" class="ghost" (click)="closeMissingFieldsModal()" aria-label="Fechar aviso">&times;</button>
      </div>
      <p class="muted">Localiza&ccedil;&atilde;o completa para correspond&ecirc;ncias e visitas.</p>
      <ul class="issue-list">
        <li class="issue-list__item" *ngFor="let item of missingFieldMessages">
          <span class="issue-list__dot"></span>
          <span>{{ item }}</span>
        </li>
      </ul>
      <div class="modal__actions">
        <button type="button" class="ghost" (click)="closeMissingFieldsModal()">Entendi</button>
        <button type="button" class="primary" (click)="closeMissingFieldsModal()">Voltar ao formul&aacute;rio</button>
      </div>
    </div>
  </div>
</section>
</app-tela-padrao>



















