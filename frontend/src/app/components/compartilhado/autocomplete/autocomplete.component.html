<div class="autocomplete">
  <input
    class="input"
    type="text"
    #inputRef
    [value]="termo"
    [placeholder]="placeholder"
    (input)="atualizarTermo($any($event.target).value)"
    (focus)="abrirPainel()"
    (blur)="fecharPainelComDelay()"
  />

  <div class="autocomplete__panel" *ngIf="termo && aberto">
    <div class="autocomplete__loading" *ngIf="carregando">Buscando...</div>
    <div class="autocomplete__error" *ngIf="!carregando && erro">{{ erro }}</div>
    <button
      type="button"
      class="autocomplete__item"
      *ngFor="let opcao of opcoes"
      (click)="selecionarOpcao(opcao); inputRef.blur()"
    >
      <span class="autocomplete__label">{{ opcao.label }}</span>
      <span class="autocomplete__sublabel" *ngIf="opcao.sublabel">{{ opcao.sublabel }}</span>
    </button>
    <div class="autocomplete__empty" *ngIf="!carregando && !erro && !opcoes.length">
      Nenhum resultado encontrado.
    </div>
  </div>
</div>

