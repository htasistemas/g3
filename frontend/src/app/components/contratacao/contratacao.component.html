
<app-tela-padrao
  [fullWidth]="true"
  [acoes]="acoesToolbar"
  [desabilitado]="acoesDesabilitadas"
  [mostrarFechar]="true"
  (buscar)="buscarCandidatos()"
  (novo)="novoCandidato()"
  (salvar)="salvarCandidato()"
  (cancelar)="novoCandidato()"
  (excluir)="inativarCandidato()"
  (imprimir)="selecionarAba('relatorios')"
>
  <section class="cadastro">
    <app-popup-messages [mensagens]="mensagensPopup"></app-popup-messages>

    <div class="cadastro-layout contratacao-layout">
      <aside class="cadastro-menu">
        <div class="tab-shell">
          <p class="tab-shell__title tab-shell__title--destaque">Processo de contratação</p>
          <ol class="step-tabs" role="tablist">
            <li class="step-tabs__item" [class.active]="abaAtiva === 'candidatos'">
              <button type="button" class="step-tabs__button" (click)="selecionarAba('candidatos')">
                <span class="step-tabs__index">1</span>
                <span class="step-tabs__label">Candidatos</span>
              </button>
            </li>
            <li class="step-tabs__item" [class.active]="abaAtiva === 'entrevistas'">
              <button type="button" class="step-tabs__button" (click)="selecionarAba('entrevistas')">
                <span class="step-tabs__index">2</span>
                <span class="step-tabs__label">Entrevistas</span>
              </button>
            </li>
            <li class="step-tabs__item" [class.active]="abaAtiva === 'admissao'">
              <button type="button" class="step-tabs__button" (click)="selecionarAba('admissao')">
                <span class="step-tabs__index">3</span>
                <span class="step-tabs__label">Admissão</span>
              </button>
            </li>
            <li class="step-tabs__item" [class.active]="abaAtiva === 'documentos'">
              <button type="button" class="step-tabs__button" (click)="selecionarAba('documentos')">
                <span class="step-tabs__index">4</span>
                <span class="step-tabs__label">Documentos</span>
              </button>
            </li>
            <li class="step-tabs__item" [class.active]="abaAtiva === 'termos'">
              <button type="button" class="step-tabs__button" (click)="selecionarAba('termos')">
                <span class="step-tabs__index">5</span>
                <span class="step-tabs__label">Termos</span>
              </button>
            </li>
            <li class="step-tabs__item" [class.active]="abaAtiva === 'vale'">
              <button type="button" class="step-tabs__button" (click)="selecionarAba('vale')">
                <span class="step-tabs__index">6</span>
                <span class="step-tabs__label">Vale-Transporte</span>
              </button>
            </li>
            <li class="step-tabs__item" [class.active]="abaAtiva === 'ppd'">
              <button type="button" class="step-tabs__button" (click)="selecionarAba('ppd')">
                <span class="step-tabs__index">7</span>
                <span class="step-tabs__label">Avaliação PPD</span>
              </button>
            </li>
            <li class="step-tabs__item" [class.active]="abaAtiva === 'carta'">
              <button type="button" class="step-tabs__button" (click)="selecionarAba('carta')">
                <span class="step-tabs__index">8</span>
                <span class="step-tabs__label">Carta Conta</span>
              </button>
            </li>
            <li class="step-tabs__item" [class.active]="abaAtiva === 'relatorios'">
              <button type="button" class="step-tabs__button" (click)="selecionarAba('relatorios')">
                <span class="step-tabs__index">9</span>
                <span class="step-tabs__label">Relatórios</span>
              </button>
            </li>
          </ol>
        </div>
      </aside>

      <div class="cadastro-conteudo">
        <div class="status-strip" *ngIf="processoSelecionado">
          <div class="status-strip__current">
            <span class="pill pill--status">{{ processoSelecionado.status }}</span>
          </div>
          <div class="status-strip__controls">
            <button type="button" class="ghost" (click)="alterarStatusProcesso('Cadastrado')">Cadastrado</button>
            <button type="button" class="ghost" (click)="alterarStatusProcesso('Em entrevista')">Em entrevista</button>
            <button type="button" class="ghost" (click)="alterarStatusProcesso('Aprovado')">Aprovado</button>
            <button type="button" class="ghost" (click)="alterarStatusProcesso('Documentos pendentes')">
              Documentos pendentes
            </button>
            <button type="button" class="ghost" (click)="alterarStatusProcesso('Documentos ok')">Documentos ok</button>
            <button type="button" class="ghost" (click)="alterarStatusProcesso('Admitido')">Admitido</button>
          </div>
        </div>

        <div class="conteudo-etapa">
          <div class="tab-card" *ngIf="abaAtiva === 'candidatos'">
              <div class="list-panel">
                <div class="list-panel__header">
                  <div>
                    <p class="list-panel__eyebrow">Candidatos</p>
                    <h2>Pesquise candidatos</h2>
                    <p>Localize por nome, CPF, vaga ou status.</p>
                  </div>
                  <div class="list-panel__actions">
                    <button type="button" class="ghost" (click)="pesquisaForm.reset(); buscarCandidatos()">Limpar</button>
                    <button type="button" class="primary" (click)="buscarCandidatos()">Buscar</button>
                  </div>
                </div>

                <form [formGroup]="pesquisaForm" class="list-panel__filters">
                  <label class="field">
                    Nome / CPF / Vaga / Status
                    <input type="text" formControlName="termo" placeholder="Digite para buscar" />
                  </label>
                </form>

                <div class="list-panel__table">
                  <table>
                    <thead>
                      <tr>
                        <th>Nome</th>
                        <th>CPF</th>
                        <th>Vaga</th>
                        <th>Status</th>
                      </tr>
                    </thead>
                    <tbody *ngIf="candidatos.length; else vazio">
                      <tr
                        *ngFor="let candidato of candidatos"
                        (click)="selecionarCandidato(candidato)"
                        [class.selected]="candidatoSelecionado?.candidatoId === candidato.candidatoId"
                      >
                        <td>{{ candidato.nomeCompleto }}</td>
                        <td>{{ candidato.cpf || '---' }}</td>
                        <td>{{ candidato.vagaPretendida || '---' }}</td>
                        <td>{{ candidato.status || '---' }}</td>
                      </tr>
                    </tbody>
                  </table>
                  <ng-template #vazio>
                    <div class="list-panel__empty">Nenhum candidato encontrado.</div>
                  </ng-template>
                </div>
              </div>

              <div class="tab-card__header">
                <div class="tab-card__title-stack">
                  <p class="tab-card__highlight">Candidatos</p>
                  <h3>Cadastro do candidato</h3>
                  <p class="muted">Dados pessoais, família, deficiência, endereço e anexos.</p>
                </div>
              </div>

              <div class="subtabs">
                <button type="button" class="subtab" [class.active]="subAbaCandidato==='dadosPessoais'" (click)="selecionarSubAba('dadosPessoais')">Dados Pessoais</button>
                <button type="button" class="subtab" [class.active]="subAbaCandidato==='familia'" (click)="selecionarSubAba('familia')">Família</button>
                <button type="button" class="subtab" [class.active]="subAbaCandidato==='deficiencia'" (click)="selecionarSubAba('deficiencia')">Deficiência</button>
                <button type="button" class="subtab" [class.active]="subAbaCandidato==='endereco'" (click)="selecionarSubAba('endereco')">Endereço/Contato</button>
                <button type="button" class="subtab" [class.active]="subAbaCandidato==='anexos'" (click)="selecionarSubAba('anexos')">Anexos</button>
              </div>

              <form [formGroup]="candidatoForm" class="field-grid cols-2" *ngIf="subAbaCandidato==='dadosPessoais'">
                <label class="field">Vaga pretendida
                  <input formControlName="vagaPretendida" />
                </label>
                <label class="field">Data do preenchimento
                  <input type="date" formControlName="dataPreenchimento" />
                </label>
                <label class="field">Nome completo (*)
                  <input formControlName="nomeCompleto" />
                </label>
                <label class="field">Data de nascimento
                  <input type="date" formControlName="dataNascimento" />
                </label>
                <label class="field">Naturalidade
                  <input formControlName="naturalidade" />
                </label>
                <label class="field">Estado civil
                  <input formControlName="estadoCivil" />
                </label>
                <label class="field">Nome da mãe
                  <input formControlName="nomeMae" />
                </label>
                <label class="field">Nome do cônjuge
                  <input formControlName="nomeConjuge" />
                </label>
                <label class="field">RG
                  <input formControlName="rg" />
                </label>
                <label class="field">CPF
                  <input formControlName="cpf" />
                </label>
                <label class="field">PIS
                  <input formControlName="pis" />
                </label>
              </form>

              <form [formGroup]="candidatoForm" class="field-grid cols-2" *ngIf="subAbaCandidato==='familia'">
                <label class="field">Possui filhos?
                  <select formControlName="filhosPossui">
                    <option [ngValue]="false">Não</option>
                    <option [ngValue]="true">Sim</option>
                  </select>
                </label>
                <div class="field full">
                  <label>Filhos e idades</label>
                  <div class="repeat-list" formArrayName="filhos">
                    <div class="repeat-item" *ngFor="let filho of filhos.controls; let i = index" [formGroupName]="i">
                      <input formControlName="nome" placeholder="Nome" />
                      <input formControlName="idade" placeholder="Idade" />
                      <button type="button" class="ghost destructive" (click)="removerFilho(i)">Remover</button>
                    </div>
                    <button type="button" class="ghost" (click)="adicionarFilho()">Adicionar filho</button>
                  </div>
                </div>
              </form>

              <form [formGroup]="candidatoForm" class="field-grid cols-2" *ngIf="subAbaCandidato==='deficiencia'">
                <label class="field">Possui deficiência?
                  <select formControlName="deficienciaPossui">
                    <option [ngValue]="false">Não</option>
                    <option [ngValue]="true">Sim</option>
                  </select>
                </label>
                <label class="field">Tipo
                  <select formControlName="deficienciaTipo">
                    <option value="">Selecione</option>
                    <option value="Física">Física</option>
                    <option value="Auditiva">Auditiva</option>
                    <option value="Visual">Visual</option>
                    <option value="Mental">Mental</option>
                  </select>
                </label>
                <label class="field full">Descrição / limitações
                  <textarea rows="3" formControlName="deficienciaDescricao"></textarea>
                </label>
              </form>

              <form [formGroup]="candidatoForm" class="field-grid cols-2" *ngIf="subAbaCandidato==='endereco'">
                <div formGroupName="endereco" class="field-grid cols-3 full">
                  <label class="field">Rua / Avenida
                    <input formControlName="logradouro" />
                  </label>
                  <label class="field">Número
                    <input formControlName="numero" />
                  </label>
                  <label class="field">Complemento
                    <input formControlName="complemento" />
                  </label>
                  <label class="field">Bairro
                    <input formControlName="bairro" />
                  </label>
                  <label class="field">Cidade
                    <input formControlName="cidade" />
                  </label>
                  <label class="field">UF
                    <input formControlName="uf" />
                  </label>
                  <label class="field">CEP
                    <input formControlName="cep" />
                  </label>
                </div>
                <label class="field">Telefone
                  <input formControlName="telefone" />
                </label>
                <label class="field">WhatsApp
                  <input formControlName="whatsapp" />
                </label>
              </form>

              <div class="field-grid cols-2" *ngIf="subAbaCandidato==='anexos'">
                <label class="field full">
                  Enviar currículo (PDF/JPG/PNG)
                  <input type="file" (change)="enviarArquivo($event, 'curriculo')" />
                </label>
                <div class="table-wrapper" *ngIf="arquivos.length">
                  <table>
                    <thead>
                      <tr>
                        <th>Arquivo</th>
                        <th>Download</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let arquivo of arquivos">
                        <td>{{ arquivo.nomeArquivo }}</td>
                        <td>
                          <a class="ghost" [href]="arquivo.urlDownload" target="_blank">Baixar</a>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          <div class="tab-card" *ngIf="abaAtiva === 'entrevistas'">
              <div class="tab-card__header">
                <div class="tab-card__title-stack">
                  <p class="tab-card__highlight">Entrevistas</p>
                  <h3>Roteiros e parecer</h3>
                  <p class="muted">Selecione perguntas, registre respostas e conclua o parecer.</p>
                </div>
              </div>
              <form [formGroup]="entrevistaForm" class="field-grid cols-2">
                <label class="field">Roteiro (*)
                  <select formControlName="tipoRoteiro" (change)="onRoteiroChange()">
                    <option>Roteiro entrevista 1</option>
                    <option>Roteiro entrevista Administrativo</option>
                  </select>
                </label>
                <label class="field">Parecer
                  <select formControlName="parecer">
                    <option>Em analise</option>
                    <option>Aprovado</option>
                    <option>Reprovado</option>
                  </select>
                </label>
                <label class="field">Data da entrevista
                  <input type="datetime-local" formControlName="dataEntrevista" />
                </label>
                <label class="field full">Observações
                  <textarea rows="3" formControlName="observacoes"></textarea>
                </label>
              </form>

              <div class="questionnaire">
                <h4>Perguntas selecionáveis</h4>
                <div class="questionnaire__list">
                  <div class="questionnaire__item" *ngFor="let pergunta of perguntasEntrevista">
                    <label class="checkbox-field">
                      <input type="checkbox" [(ngModel)]="pergunta.selecionada" [ngModelOptions]="{standalone: true}" />
                      {{ pergunta.texto }}
                    </label>
                    <textarea
                      rows="2"
                      placeholder="Resposta"
                      [(ngModel)]="pergunta.resposta"
                      [ngModelOptions]="{standalone: true}"
                    ></textarea>
                  </div>
                </div>
              </div>

              <div class="tab-actions">
                <button type="button" class="primary" (click)="salvarEntrevista()">Registrar entrevista</button>
              </div>
              <div class="table-wrapper" *ngIf="entrevistas.length">
                <table>
                  <thead>
                    <tr>
                      <th>Roteiro</th>
                      <th>Data</th>
                      <th>Parecer</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let entrevista of entrevistas">
                      <td>{{ entrevista.tipoRoteiro }}</td>
                      <td>{{ entrevista.dataEntrevista | date:'dd/MM/yyyy HH:mm' }}</td>
                      <td>{{ entrevista.parecer }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

          <div class="tab-card" *ngIf="abaAtiva === 'admissao'">
              <div class="tab-card__header">
                <div class="tab-card__title-stack">
                  <p class="tab-card__highlight">Admissão</p>
                  <h3>Ficha de admissão</h3>
                  <p class="muted">Dados do colaborador e informações internas para RH.</p>
                </div>
              </div>
              <form [formGroup]="fichaForm">
              <div class="field-grid cols-2" [formGroup]="fichaDadosPessoais">
                <label class="field">Nome completo
                  <input formControlName="nomeCompleto" />
                </label>
                <label class="field">Sexo
                  <input formControlName="sexo" />
                </label>
                <label class="field">Data nascimento
                  <input type="date" formControlName="dataNascimento" />
                </label>
                <label class="field">Cidade nascimento
                  <input formControlName="cidadeNascimento" />
                </label>
                <label class="field">UF nascimento
                  <input formControlName="ufNascimento" />
                </label>
                <label class="field">Cor
                  <input formControlName="cor" />
                </label>
                <label class="field">Estado civil
                  <input formControlName="estadoCivil" />
                </label>
                <label class="field">Nome do pai
                  <input formControlName="nomePai" />
                </label>
                <label class="field">Nome da mãe
                  <input formControlName="nomeMae" />
                </label>
                <label class="field">RG
                  <input formControlName="rg" />
                </label>
                <label class="field">Data emissão RG
                  <input type="date" formControlName="rgEmissao" />
                </label>
                <label class="field">CPF
                  <input formControlName="cpf" />
                </label>
                <label class="field">PIS
                  <input formControlName="pis" />
                </label>
                <label class="field">Escolaridade
                  <input formControlName="escolaridade" />
                </label>
                <label class="field">Número de filhos
                  <input formControlName="numeroFilhos" />
                </label>
                <label class="field">Idade dos filhos
                  <input formControlName="idadesFilhos" />
                </label>
                <label class="field">Religião
                  <input formControlName="religiao" />
                </label>
                <label class="field">Endereço
                  <input formControlName="endereco" />
                </label>
                <label class="field">Número
                  <input formControlName="numero" />
                </label>
                <label class="field">Complemento
                  <input formControlName="complemento" />
                </label>
                <label class="field">Bairro
                  <input formControlName="bairro" />
                </label>
                <label class="field">Cidade
                  <input formControlName="cidade" />
                </label>
                <label class="field">UF
                  <input formControlName="uf" />
                </label>
                <label class="field">CEP
                  <input formControlName="cep" />
                </label>
                <label class="field">Telefone
                  <input formControlName="telefone" />
                </label>
                <label class="field">E-mail
                  <input formControlName="email" />
                </label>
              </div>

              <div class="repeat-section" formArrayName="dependentesIr">
                <h4>Dependentes para IR</h4>
                <div class="repeat-list">
                  <div class="repeat-item" *ngFor="let dep of dependentesIr.controls; let i = index" [formGroupName]="i">
                    <input formControlName="nome" placeholder="Nome" />
                    <input formControlName="parentesco" placeholder="Parentesco" />
                    <button type="button" class="ghost destructive" (click)="removerDependenteIr(i)">Remover</button>
                  </div>
                  <button type="button" class="ghost" (click)="adicionarDependenteIr()">Adicionar dependente</button>
                </div>
              </div>

              <div class="repeat-section" formArrayName="dependentesSalario">
                <h4>Dependentes salário família</h4>
                <div class="repeat-list">
                  <div class="repeat-item" *ngFor="let dep of dependentesSalario.controls; let i = index" [formGroupName]="i">
                    <input formControlName="nome" placeholder="Nome" />
                    <input type="date" formControlName="nascimento" placeholder="Nascimento" />
                    <button type="button" class="ghost destructive" (click)="removerDependenteSalario(i)">Remover</button>
                  </div>
                  <button type="button" class="ghost" (click)="adicionarDependenteSalario()">Adicionar dependente</button>
                </div>
              </div>

              <div class="field-grid cols-2" [formGroup]="fichaDadosInternos">
                <label class="field">Empresa
                  <input formControlName="empresa" />
                </label>
                <label class="field">Departamento / Setor
                  <input formControlName="departamentoSetor" />
                </label>
                <label class="field">Cargo / Função
                  <input formControlName="cargoFuncao" />
                </label>
                <label class="field">Salário
                  <input formControlName="salario" />
                </label>
                <label class="field">Contrato experiência
                  <input formControlName="contratoExperiencia" />
                </label>
                <label class="field">Data prorrogação
                  <input type="date" formControlName="dataProrrogacao" />
                </label>
                <label class="field">Benefícios
                  <input formControlName="beneficios" />
                </label>
                <label class="field">Carga horária semanal
                  <input formControlName="cargaHorariaSemanal" />
                </label>
                <label class="field">Horário de trabalho
                  <input formControlName="horarioTrabalho" />
                </label>
                <label class="field">Data admissão
                  <input type="date" formControlName="dataAdmissao" />
                </label>
                <label class="field">Dados bancários
                  <input formControlName="dadosBancarios" />
                </label>
                <label class="checkbox-field">
                  <input type="checkbox" formControlName="eventoS2200" /> Evento S-2200
                </label>
                <label class="checkbox-field">
                  <input type="checkbox" formControlName="eventoS2220" /> Evento S-2220
                </label>
                <label class="checkbox-field">
                  <input type="checkbox" formControlName="eventoS2240" /> Evento S-2240
                </label>
              </div>

              <div class="tab-actions">
                <button type="button" class="primary" (click)="salvarFicha()">Salvar ficha</button>
              </div>
              </form>
            </div>
          <div class="tab-card" *ngIf="abaAtiva === 'documentos'">
              <div class="tab-card__header">
                <div class="tab-card__title-stack">
                  <p class="tab-card__highlight">Documentos</p>
                  <h3>Documentos de admissão</h3>
                  <p class="muted">Checklist com status, observações e upload.</p>
                </div>
              </div>
              <div class="alerta-documentos">
                Se faltar algum documento obrigatório, a contratação não poderá ser processada.
              </div>
              <div class="table-wrapper">
                <table>
                  <thead>
                    <tr>
                      <th>Documento</th>
                      <th>Status</th>
                      <th>Observação</th>
                      <th>Anexo</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of documentos">
                      <td>{{ item.tipoDocumento }}</td>
                      <td>
                        <select [(ngModel)]="item.status" [ngModelOptions]="{standalone: true}">
                          <option value="pendente">Pendente</option>
                          <option value="enviado">Enviado</option>
                          <option value="aprovado">Aprovado</option>
                          <option value="rejeitado">Rejeitado</option>
                        </select>
                      </td>
                      <td>
                        <input type="text" [(ngModel)]="item.observacao" [ngModelOptions]="{standalone: true}" />
                      </td>
                      <td>
                        <input type="file" (change)="enviarArquivo($event, 'documentos', item.tipoDocumento)" />
                        <button type="button" class="ghost" (click)="atualizarDocumento(item)">Salvar</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

          <div class="tab-card" *ngIf="abaAtiva === 'termos'">
              <div class="tab-card__header">
                <div class="tab-card__title-stack">
                  <p class="tab-card__highlight">Termos</p>
                  <h3>Termos e declarações</h3>
                  <p class="muted">LGPD e autodeclarações com status de assinatura.</p>
                </div>
              </div>
              <form [formGroup]="termoMetaForm" class="field-grid cols-3">
                <label class="field">Status assinatura
                  <select formControlName="statusAssinatura">
                    <option>Pendente</option>
                    <option>Assinado</option>
                    <option>Rejeitado</option>
                  </select>
                </label>
                <label class="field">Data assinatura
                  <input type="date" formControlName="dataAssinatura" />
                </label>
                <label class="field">Responsável
                  <input formControlName="responsavel" />
                </label>
              </form>

              <div class="termo-section">
                <h4>Termo LGPD</h4>
                <form [formGroup]="termoLgpdForm" class="field-grid cols-2">
                  <label class="field">Nome completo
                    <input formControlName="nomeCompleto" />
                  </label>
                  <label class="field">CPF
                    <input formControlName="cpf" />
                  </label>
                  <label class="field full">Itens tratados
                    <textarea rows="3" formControlName="itensTratados"></textarea>
                  </label>
                  <label class="checkbox-field">
                    <input type="checkbox" formControlName="aceite" /> Aceite do termo
                  </label>
                  <label class="field">Assinatura digital (gov.br)
                    <select formControlName="assinaturaDigital">
                      <option>Não</option>
                      <option>Sim</option>
                    </select>
                  </label>
                </form>
                <div class="tab-actions">
                  <button type="button" class="primary" (click)="salvarTermoLgpd()">Salvar LGPD</button>
                </div>
              </div>

              <div class="termo-section">
                <h4>Autodeclaração étnico-racial</h4>
                <form [formGroup]="termoEtniaForm" class="field-grid cols-2">
                  <label class="field">Nome completo
                    <input formControlName="nomeCompleto" />
                  </label>
                  <label class="field">CPF
                    <input formControlName="cpf" />
                  </label>
                  <label class="field">Etnia
                    <select formControlName="etnia">
                      <option>Branca</option>
                      <option>Preta</option>
                      <option>Parda</option>
                      <option>Amarela</option>
                      <option>Indígena</option>
                    </select>
                  </label>
                  <label class="field">Cidade/UF
                    <input formControlName="cidadeUf" />
                  </label>
                  <label class="field">Data
                    <input type="date" formControlName="dataDeclaracao" />
                  </label>
                  <label class="field">Assinatura digital
                    <select formControlName="assinaturaDigital">
                      <option>Não</option>
                      <option>Sim</option>
                    </select>
                  </label>
                </form>
                <div class="tab-actions">
                  <button type="button" class="primary" (click)="salvarTermoEtnia()">Salvar autodeclaração</button>
                </div>
              </div>
            </div>

          <div class="tab-card" *ngIf="abaAtiva === 'vale'">
              <div class="tab-card__header">
                <div class="tab-card__title-stack">
                  <p class="tab-card__highlight">Vale-transporte</p>
                  <h3>Termo de vale-transporte</h3>
                  <p class="muted">Necessidade, operadoras e linhas do percurso.</p>
                </div>
              </div>
              <form [formGroup]="valeTransporteForm" class="field-grid cols-2">
                <label class="field">Necessita vale-transporte?
                  <select formControlName="necessita">
                    <option>Não</option>
                    <option>Sim</option>
                  </select>
                </label>
                <label class="field">Motivo (se não necessita)
                  <input formControlName="motivoNaoNecessita" />
                </label>
                <label class="field full">Endereço residência
                  <input formControlName="enderecoResidencia" />
                </label>
                <div formGroupName="meiosTransporte" class="field-grid cols-3 full">
                  <label class="checkbox-field"><input type="checkbox" formControlName="onibus" /> Ônibus</label>
                  <label class="checkbox-field"><input type="checkbox" formControlName="metro" /> Metrô</label>
                  <label class="checkbox-field"><input type="checkbox" formControlName="trem" /> Trem</label>
                </div>
                <div formGroupName="operadora" class="field-grid cols-2 full">
                  <label class="field">Operadora
                    <input formControlName="nome" />
                  </label>
                  <label class="field">Valor unitário
                    <input formControlName="valorUnitario" />
                  </label>
                  <label class="field">Telefone
                    <input formControlName="telefone" />
                  </label>
                  <label class="field">Cidade
                    <input formControlName="cidade" />
                  </label>
                </div>
                <label class="field">Operadora/Cartão VT
                  <input formControlName="operadoraCartao" />
                </label>
                <label class="checkbox-field">
                  <input type="checkbox" formControlName="desconto6Porcento" /> Autoriza desconto até 6%
                </label>
                <label class="checkbox-field">
                  <input type="checkbox" formControlName="declaracao" /> Declaração de uso exclusivo
                </label>
              </form>

              <div class="repeat-section" formArrayName="linhas">
                <h4>Linhas de ônibus</h4>
                <div class="repeat-list">
                  <div class="repeat-item" *ngFor="let linha of linhasTransporte.controls; let i = index" [formGroupName]="i">
                    <input formControlName="percurso" placeholder="Percurso" />
                    <input formControlName="linha" placeholder="Linha" />
                    <input formControlName="tarifa" placeholder="Tarifa" />
                    <input formControlName="quantidade" placeholder="Qtd" />
                    <button type="button" class="ghost destructive" (click)="removerLinhaTransporte(i)">Remover</button>
                  </div>
                  <button type="button" class="ghost" (click)="adicionarLinhaTransporte()">Adicionar linha</button>
                </div>
              </div>

              <div class="tab-actions">
                <button type="button" class="primary" (click)="salvarTermoVale()">Salvar vale-transporte</button>
              </div>
            </div>
          <div class="tab-card" *ngIf="abaAtiva === 'ppd'">
              <div class="tab-card__header">
                <div class="tab-card__title-stack">
                  <p class="tab-card__highlight">Avaliação PPD</p>
                  <h3>Pesquisa de potencial e desempenho</h3>
                  <p class="muted">Selecione os itens do Lado A e Lado B.</p>
                </div>
              </div>
              <div class="field-grid cols-3" [formGroup]="cabecalhoPpd">
                <label class="field">Empresa
                  <input formControlName="empresa" />
                </label>
                <label class="field">Nome
                  <input formControlName="nome" />
                </label>
                <label class="field">Cargo
                  <input formControlName="cargo" />
                </label>
                <label class="field">Data
                  <input type="date" formControlName="data" />
                </label>
                <label class="field">Sexo
                  <input formControlName="sexo" />
                </label>
                <label class="field">E-mail
                  <input formControlName="email" />
                </label>
                <label class="field">Data nascimento
                  <input type="date" formControlName="dataNascimento" />
                </label>
                <label class="field">CPF
                  <input formControlName="cpf" />
                </label>
                <label class="field">RG
                  <input formControlName="rg" />
                </label>
              </div>
              <div class="ppd-grid">
                <div>
                  <h4>Lado A</h4>
                  <div class="ppd-list">
                    <label class="checkbox-field" *ngFor="let item of palavrasPpd">
                      <input type="checkbox" [(ngModel)]="item.selecionado" [ngModelOptions]="{standalone: true}" />
                      {{ item.texto }}
                    </label>
                  </div>
                </div>
                <div>
                  <h4>Lado B</h4>
                  <div class="ppd-list">
                    <label class="checkbox-field" *ngFor="let item of palavrasPpd">
                      <input type="checkbox" [(ngModel)]="item.selecionado" [ngModelOptions]="{standalone: true}" />
                      {{ item.texto }}
                    </label>
                  </div>
                </div>
              </div>
              <div class="tab-actions">
                <button type="button" class="primary" (click)="salvarPpd()">Salvar PPD</button>
              </div>
            </div>

          <div class="tab-card" *ngIf="abaAtiva === 'carta'">
              <div class="tab-card__header">
                <div class="tab-card__title-stack">
                  <p class="tab-card__highlight">Carta conta salário</p>
                  <h3>Carta de abertura de conta salário</h3>
                  <p class="muted">Dados do colaborador e responsável da empresa.</p>
                </div>
              </div>
              <form [formGroup]="cartaForm" class="field-grid cols-2">
                <label class="field">Cidade/UF
                  <input formControlName="cidadeUf" />
                </label>
                <label class="field">Data
                  <input type="date" formControlName="dataCarta" />
                </label>
                <label class="field">Banco
                  <input formControlName="banco" />
                </label>
                <label class="field">Gerente
                  <input formControlName="gerente" />
                </label>
                <label class="field">Nome
                  <input formControlName="nome" />
                </label>
                <label class="field">CPF
                  <input formControlName="cpf" />
                </label>
                <label class="field">Identidade
                  <input formControlName="identidade" />
                </label>
                <label class="field">Órgão
                  <input formControlName="orgao" />
                </label>
                <label class="field">Endereço completo
                  <input formControlName="endereco" />
                </label>
                <label class="field">Data nascimento
                  <input type="date" formControlName="dataNascimento" />
                </label>
                <label class="field">Data admissão
                  <input type="date" formControlName="dataAdmissao" />
                </label>
                <label class="field">Cargo
                  <input formControlName="cargo" />
                </label>
                <label class="field">Salário
                  <input formControlName="salario" />
                </label>
                <label class="field">Responsável
                  <input formControlName="responsavel" />
                </label>
                <label class="field">CNPJ
                  <input formControlName="cnpj" />
                </label>
              </form>
              <div class="tab-actions">
                <button type="button" class="primary" (click)="salvarCarta()">Salvar carta</button>
              </div>
            </div>

          <div class="tab-card" *ngIf="abaAtiva === 'relatorios'">
              <div class="tab-card__header">
                <div class="tab-card__title-stack">
                  <p class="tab-card__highlight">Relatórios</p>
                  <h3>Relatórios e exportações</h3>
                  <p class="muted">Gere PDFs e exportações por status e pendências.</p>
                </div>
              </div>
              <div class="tab-actions">
                <button type="button" class="primary">Candidatos por status</button>
                <button type="button" class="ghost">Documentos pendentes</button>
                <button type="button" class="ghost">Termos pendentes</button>
                <button type="button" class="ghost">Admissões concluídas</button>
              </div>
            </div>

          <div class="tab-card" *ngIf="abaAtiva === 'auditoria'">
              <div class="tab-card__header">
                <div class="tab-card__title-stack">
                  <p class="tab-card__highlight">Timeline</p>
                  <h3>Histórico do processo</h3>
                  <p class="muted">Acompanhe mudanças de status e ações registradas.</p>
                </div>
              </div>
              <div class="table-wrapper" *ngIf="auditoria.length">
                <table>
                  <thead>
                    <tr>
                      <th>Data</th>
                      <th>Ação</th>
                      <th>Detalhes</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of auditoria">
                      <td>{{ item.criadoEm | date:'dd/MM/yyyy HH:mm' }}</td>
                      <td>{{ item.acao }}</td>
                      <td>{{ item.detalhes }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
        </div>
      </div>
    </div>
  </section>
</app-tela-padrao>
