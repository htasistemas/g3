<section class="cadastro">
  <header class="page-title">
    <p class="page-title__eyebrow">Atendimentos</p>
    <p class="page-title__label">Cursos e Atendimentos</p>
  </header>

  <div class="tab-shell">
    <p class="tab-shell__title">Navegue pelas informações</p>
    <ol class="step-tabs" role="tablist">
      <li
        *ngFor="let tab of tabs; index as idx"
        class="step-tabs__item"
        [class.active]="activeTab === tab.id"
        [class.completed]="idx < activeTabIndex"
      >
        <button
          class="step-tabs__button"
          type="button"
          role="tab"
          [attr.aria-selected]="activeTab === tab.id"
          (click)="changeTab(tab.id)"
        >
          <span class="step-tabs__index">{{ idx + 1 }}</span>
          <span class="step-tabs__label">{{ tab.label }}</span>
        </button>
      </li>
    </ol>
  </div>

  <form [formGroup]="courseForm" class="form-shell" (ngSubmit)="submit()">
    <div *ngIf="feedback" class="feedback" role="alert">
      <span>{{ feedback }}</span>
      <button type="button" class="feedback__close" aria-label="Fechar aviso" (click)="dismissFeedback()">
        ×
      </button>
    </div>

    <ng-template #navigationControls>
      <div class="tab-actions">
        <button type="button" class="ghost" *ngIf="hasPreviousTab" (click)="goToPreviousTab()">Voltar</button>
        <button type="submit" class="primary" [disabled]="saving">
          {{ saving ? 'Salvando...' : 'Salvar cadastro' }}
        </button>
        <button type="button" class="ghost" *ngIf="hasNextTab" (click)="goToNextTab()">
          Ir para: {{ nextTabLabel }}
        </button>
      </div>
    </ng-template>

    <div class="tab-card" *ngIf="activeTab === 'dados'">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ tabs[activeTabIndex].label }}</p>
          <p class="muted">Cadastre ou edite cursos e atendimentos com as mesmas interações do voluntariado.</p>
        </div>
        <span class="pill">Obrigatório</span>
      </div>
      <div class="field-grid cols-4 dados-grid">
        <label class="field">
          Tipo*
          <select formControlName="tipo">
            <option value=""></option>
            <option value="Curso">Curso</option>
            <option value="Atendimento">Atendimento</option>
            <option value="Oficina">Oficina</option>
          </select>
        </label>
        <label class="field">
          Nome do curso/atendimento*
          <input
            formControlName="nome"
            (input)="applyCapitalization(courseForm, 'nome', $any($event.target).value)"
            (blur)="applyCapitalization(courseForm, 'nome', $any($event.target).value)"
          />
        </label>
        <label class="field">
          Horário inicial*
          <input type="time" formControlName="horarioInicial" />
        </label>
        <label class="field">
          Duração (horas)*
          <input type="number" formControlName="duracaoHoras" min="1" />
        </label>
      </div>

      <div class="field-grid cols-2 description-media full">
        <label class="field description-field">Descrição / Objetivo*<textarea rows="3" formControlName="descricao"></textarea></label>

        <div class="field media-card">
          <p class="field-title">Foto / Imagem ilustrativa</p>
          <input type="file" accept="image/*" (change)="handleImage($event)" />
          <div class="upload-preview" *ngIf="courseForm.value.imagem">
            <img [src]="courseForm.value.imagem" alt="Pré-visualização" />
            <div>
              <p class="strong">Pré-visualização</p>
              <p class="muted">A imagem aparece no catálogo e no dashboard.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="field day-selector horizontal full">
        <p class="field-title">Dias da semana*</p>
        <div class="chips">
          <label *ngFor="let dia of diasSemana" class="chip">
            <input
              type="checkbox"
              [checked]="selectionChecked(['diasSemana'], dia)"
              (change)="toggleSelection(['diasSemana'], dia)"
            />
            <span>{{ dia }}</span>
          </label>
        </div>
      </div>

      <div class="field-grid cols-4 dados-grid load-room-grid">
        <label class="field">Carga horária total (horas)<input type="number" formControlName="cargaHoraria" min="0" /></label>
        <label class="field">
          Quantidade de vagas totais*
          <input type="number" formControlName="vagasTotais" min="1" />
        </label>
        <label class="field">
          Vagas disponíveis
          <input type="number" [value]="currentCourse?.vagasDisponiveis ?? courseForm.value.vagasTotais" readonly />
        </label>
        <div class="field sala-field">
          <label class="field-title" for="salaSelect">Sala*</label>
          <div class="inline-control">
            <select id="salaSelect" formControlName="salaId">
              <option value="" disabled [selected]="!courseForm.value.salaId">Selecione a sala</option>
              <option *ngFor="let room of rooms" [value]="room.id">{{ room.nome }}</option>
            </select>
            <button type="button" class="ghost" (click)="addRoom()">Cadastrar sala</button>
          </div>
          <div class="search-hint" *ngIf="roomsLoading">Carregando salas...</div>
        </div>
      </div>

      <label class="field full">
        Restrições e público indicado
        <textarea
          rows="2"
          formControlName="restricoes"
          placeholder="Ex.: menores de 18 anos não podem participar, vagas preferenciais para idosos, faixa etária recomendada"
        ></textarea>
      </label>

      <label class="field full">
        Profissional responsável*
        <input
          formControlName="profissional"
          placeholder="Pesquise ou digite o nome do profissional"
          (input)="applyCapitalization(courseForm, 'profissional', $any($event.target).value)"
          (blur)="applyCapitalization(courseForm, 'profissional', $any($event.target).value)"
        />
        <div class="search-hint" *ngIf="professionalSearchLoading">Buscando profissionais...</div>
        <ul class="search-results" *ngIf="professionalResults.length">
          <li *ngFor="let professional of professionalResults">
            <button type="button" (click)="selectProfessional(professional)">
              <span>{{ professional.nome }}</span>
              <small>{{ professional.especialidade || professional.categoria || professional.email }}</small>
            </button>
          </li>
        </ul>
      </label>
      <div class="actions">
        <button type="button" class="ghost" (click)="startNew()">Novo cadastro</button>
        <div class="actions__stack">
          <button type="submit" class="primary" [disabled]="saving">{{ saving ? 'Salvando...' : 'Salvar e continuar' }}</button>
          <div class="actions__inline">
            <button type="button" class="ghost" (click)="changeTab('inscricoes')">Ir para inscrições</button>
          </div>
        </div>
      </div>

      <div class="list-card">
        <div class="list-card__header">
          <div>
            <p class="page-title__eyebrow">Listas consolidadas</p>
            <p class="page-title__label">Beneficiários aguardando por curso</p>
          </div>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Curso/Atendimento</th>
                <th>Beneficiário</th>
                <th>CPF</th>
                <th>Data de entrada</th>
                <th>Posição</th>
                <th>Destino</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of waitlistOverview">
                <td>{{ item.course.tipo }} • {{ item.course.nome }}</td>
                <td>{{ item.entry.beneficiaryName }}</td>
                <td>{{ item.entry.cpf }}</td>
                <td>{{ item.entry.joinedAt | date: 'shortDate' }}</td>
                <td>{{ item.position }}</td>
                <td>
                  <select
                    [(ngModel)]="waitlistTransfers[item.entry.id]"
                    [ngModelOptions]="{ standalone: true }"
                  >
                    <option value="" disabled>Selecionar destino</option>
                    <option
                      *ngFor="let course of records"
                      [value]="course.id"
                      [disabled]="course.id === item.course.id"
                    >
                      {{ course.tipo }} • {{ course.nome }}
                    </option>
                  </select>
                </td>
                <td class="table-actions">
                  <button
                    class="ghost"
                    type="button"
                    (click)="transferWaitlist(item.entry, item.course)"
                    [disabled]="!waitlistTransfers[item.entry.id]"
                  >
                    Transferir
                  </button>
                  <button class="ghost" type="button" (click)="removeFromWaitlist(item.entry, item.course)">Remover</button>
                </td>
              </tr>
              <tr *ngIf="!waitlistOverview.length">
                <td colspan="7" class="muted">Nenhum beneficiário em listas de espera.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>

    <div class="tab-card" *ngIf="activeTab === 'catalogo'">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ tabs[activeTabIndex].label }}</p>
          <p class="muted">Visualize rapidamente o status de cada curso, atendimento ou oficina.</p>
        </div>
        <span class="pill">Seleção</span>
      </div>

      <div class="catalog-grid">
        <article *ngFor="let course of records" class="catalog-card" [ngClass]="getCardAccent(course)">
          <div class="catalog-card__badge" [ngClass]="courseStatus(course).tone">{{ courseStatus(course).label }}</div>
          <div class="catalog-card__header">
            <div class="catalog-card__media" *ngIf="course.imagem; else fallbackIcon">
              <img [src]="course.imagem" [alt]="course.nome" />
            </div>
            <ng-template #fallbackIcon>
              <div class="catalog-card__icon" aria-hidden="true">{{ course.tipo.slice(0, 1) }}</div>
            </ng-template>
            <div class="catalog-card__meta">
              <p class="catalog-card__category">{{ course.tipo }}</p>
              <h3 class="catalog-card__title">{{ course.nome }}</h3>
              <p class="catalog-card__subtitle">{{ course.profissional }}</p>
            </div>
          </div>
          <p class="catalog-card__description">{{ course.descricao }}</p>
          <dl class="catalog-card__details">
            <div>
              <dt>Início</dt>
              <dd>{{ course.horarioInicial }}</dd>
            </div>
            <div>
              <dt>Vagas</dt>
              <dd>{{ course.vagasDisponiveis }} / {{ course.vagasTotais }}</dd>
            </div>
            <div>
              <dt>Dias</dt>
              <dd>{{ course.diasSemana.join(', ') }}</dd>
            </div>
            <div>
              <dt>Sala</dt>
              <dd>{{ getRoomName(course) }}</dd>
            </div>
          </dl>
          <div class="catalog-card__footer">
            <div class="catalog-card__chips" *ngIf="course.restricoes">
              <span class="chip muted-chip">{{ course.restricoes }}</span>
            </div>
            <div class="catalog-card__actions">
              <button type="button" class="ghost" (click)="fillFromCourse(course)">Editar</button>
              <button type="button" class="danger" (click)="deleteCourse(course)">Excluir</button>
              <button
                type="button"
                class="primary"
                (click)="selectFromCatalog(course.id)"
                [disabled]="course.vagasDisponiveis === 0"
              >
                Inscrever beneficiário
              </button>
            </div>
          </div>
        </article>
        <p class="muted" *ngIf="!records.length">Cadastre cursos ou atendimentos para exibir o catálogo.</p>
      </div>

      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>

    <div class="tab-card" *ngIf="activeTab === 'inscricoes'">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ tabs[activeTabIndex].label }}</p>
          <p class="muted">Controle de matrículas e lista de espera seguindo as regras de vagas.</p>
        </div>
        <span class="pill">Inscrições</span>
      </div>

      <div class="field-grid cols-4" [formGroup]="enrollmentForm">
        <label class="field full">
          Selecione o curso/atendimento*
          <select formControlName="courseId" (change)="selectCourseForEnrollment($any($event.target).value)">
            <option value="" disabled [selected]="!enrollmentForm.value.courseId">Escolha uma opção</option>
            <option *ngFor="let course of records" [value]="course.id">
              {{ course.tipo }} • {{ course.nome }} ({{ course.vagasDisponiveis }} vagas livres)
            </option>
          </select>
        </label>
        <label class="field full">
          Beneficiário (nome ou CPF)*
          <input
            formControlName="beneficiaryName"
            placeholder="Buscar beneficiário"
            (input)="applyCapitalization(enrollmentForm, 'beneficiaryName', $any($event.target).value)"
            (blur)="applyCapitalization(enrollmentForm, 'beneficiaryName', $any($event.target).value)"
          />
          <div class="search-hint" *ngIf="beneficiarySearchLoading">Buscando beneficiários...</div>
          <ul class="search-results" *ngIf="beneficiaryResults.length">
            <li *ngFor="let beneficiary of beneficiaryResults">
              <button type="button" (click)="selectBeneficiary(beneficiary)">
                <span>{{ beneficiary.nomeCompleto || beneficiary.nomeSocial }}</span>
                <small>{{ beneficiary.cpf || 'CPF não informado' }}</small>
              </button>
            </li>
          </ul>
        </label>
        <label class="field">CPF*<input formControlName="cpf" placeholder="000.000.000-00" /></label>
        <label class="field">WhatsApp<input formControlName="whatsapp" placeholder="(11) 99999-0000" /></label>
        <div class="actions align-end">
            <div class="helper" *ngIf="currentCourse">
              <p class="helper__title">Vagas disponíveis</p>
              <p class="helper__value">{{ currentCourse.vagasDisponiveis }} / {{ currentCourse.vagasTotais }}</p>
            </div>
          <button class="primary" type="button" (click)="enroll()">Inscrever</button>
        </div>
      </div>

      <div class="list-card">
        <div class="list-card__header">
          <div>
            <p class="page-title__eyebrow">Matrículas</p>
            <p class="page-title__label">Beneficiários vinculados</p>
          </div>
          <div class="inline-actions">
            <label class="field full">
              Mensagem do WhatsApp
              <textarea
                rows="2"
                [(ngModel)]="whatsappMessageTemplate"
                [ngModelOptions]="{ standalone: true }"
                [placeholder]="'Use {{nome}}, {{curso}}, {{horario}}, {{profissional}} e {{status}} para personalizar'"
              ></textarea>
            </label>
            <button
              type="button"
              class="ghost"
              (click)="sendWhatsAppToAll()"
              [disabled]="!currentCourse?.enrollments?.length"
            >
              WhatsApp para todos
            </button>
          </div>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Nome</th>
                <th>CPF</th>
                <th>Situação</th>
                <th>Data de inscrição</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let enrollment of currentCourse?.enrollments">
                <td>{{ enrollment.beneficiaryName }}</td>
                <td>{{ enrollment.cpf }}</td>
                <td>
                  <select [ngModel]="enrollment.status" (ngModelChange)="updateEnrollmentStatus(enrollment, $event)">
                    <option value="Ativo">Ativo</option>
                    <option value="Concluído">Concluído</option>
                    <option value="Cancelado">Cancelado</option>
                  </select>
                </td>
                <td>{{ enrollment.enrolledAt | date: 'shortDate' }}</td>
                <td class="table-actions">
                  <button type="button" class="ghost" (click)="sendWhatsApp(enrollment)">
                    Avisar por WhatsApp
                  </button>
                  <button type="button" class="ghost" (click)="emitDocument(enrollment)" [disabled]="!eligibleForDocument(enrollment)">
                    {{ currentCourse?.tipo === 'Curso' ? 'Certificado' : 'Atestado' }}
                  </button>
                </td>
              </tr>
              <tr *ngIf="!currentCourse?.enrollments?.length">
                <td colspan="5" class="muted">Nenhuma matrícula cadastrada.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="list-card">
        <div class="list-card__header">
          <div>
            <p class="page-title__eyebrow">Lista de espera</p>
            <p class="page-title__label">Ordem de chegada</p>
          </div>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Nome</th>
                <th>CPF</th>
                <th>Data de entrada</th>
                <th>Posição</th>
                <th>Destino</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of currentCourse?.waitlist; index as idx">
                <td>{{ item.beneficiaryName }}</td>
                <td>{{ item.cpf }}</td>
                <td>{{ item.joinedAt | date: 'shortDate' }}</td>
                <td>{{ idx + 1 }}</td>
                <td>
                  <select
                    [(ngModel)]="waitlistTransfers[item.id]"
                    [ngModelOptions]="{ standalone: true }"
                  >
                    <option value="" disabled>Selecionar destino</option>
                    <option *ngFor="let course of records" [value]="course.id" [disabled]="course.id === currentCourse?.id">
                      {{ course.tipo }} • {{ course.nome }}
                    </option>
                  </select>
                </td>
                <td class="table-actions">
                  <button class="primary" type="button" (click)="convertWaitlist(item)" [disabled]="(currentCourse?.vagasDisponiveis ?? 0) === 0">
                    Converter para matrícula
                  </button>
                  <button
                    class="ghost"
                    type="button"
                    (click)="currentCourse && transferWaitlist(item, currentCourse)"
                    [disabled]="!waitlistTransfers[item.id] || !currentCourse"
                  >
                    Transferir
                  </button>
                  <button class="ghost" type="button" (click)="removeFromWaitlist(item)">Remover</button>
                </td>
              </tr>
              <tr *ngIf="!currentCourse?.waitlist?.length">
                <td colspan="5" class="muted">Nenhum beneficiário em fila.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>

    <div class="tab-card" *ngIf="activeTab === 'documentos'">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ tabs[activeTabIndex].label }}</p>
          <p class="muted">Emita certificados para cursos concluídos ou atestados para atendimentos.</p>
        </div>
        <span class="pill">PDF</span>
      </div>

      <div class="list-card">
        <div class="list-card__header">
          <div>
            <p class="page-title__eyebrow">Modelo do documento</p>
            <p class="page-title__label">Personalize certificados e atestados</p>
            <p class="muted">
              Use marcadores como &#123;&#123; nome &#125;&#125;, &#123;&#123; curso &#125;&#125;, &#123;&#123; tipo &#125;&#125;, &#123;&#123; horario &#125;&#125;,
              &#123;&#123; cargaHoraria &#125;&#125;, &#123;&#123; profissional &#125;&#125; e &#123;&#123; dataAtual &#125;&#125;.
            </p>
          </div>
        </div>
        <div class="field-grid cols-2" [formGroup]="courseForm">
          <label class="field full">
            HTML / texto do certificado
            <textarea rows="6" formControlName="certificateTemplate" placeholder="Cole ou escreva o modelo do certificado"></textarea>
            <small class="muted">Se deixar em branco, o sistema usa o modelo padrão.</small>
          </label>
          <div class="field">
            <p class="field-title">Importar modelo</p>
            <input type="file" accept=".html,.txt,text/html" (change)="loadCertificateTemplate($event)" />
            <p class="muted">O arquivo deve conter HTML ou texto simples.</p>
          </div>
        </div>
        <div class="actions">
          <button type="button" class="primary" (click)="saveCertificateTemplate()" [disabled]="!currentCourse">
            Salvar modelo
          </button>
        </div>
      </div>

      <div class="list-card">
        <div class="list-card__header">
          <div>
            <p class="page-title__eyebrow">Registros elegíveis</p>
            <p class="page-title__label">{{ currentCourse?.tipo === 'Curso' ? 'Certificados de conclusão' : 'Atestados de comparecimento' }}</p>
          </div>
          <div class="actions__inline">
            <button type="button" class="ghost" (click)="emitAllDocuments()" [disabled]="!currentCourse?.enrollments?.length">
              Imprimir todos
            </button>
          </div>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Beneficiário</th>
                <th>CPF</th>
                <th>Situação</th>
                <th>Ação</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let enrollment of currentCourse?.enrollments">
                <td>{{ enrollment.beneficiaryName }}</td>
                <td>{{ enrollment.cpf }}</td>
                <td>{{ enrollment.status }}</td>
                <td>
                  <button type="button" class="primary" (click)="emitDocument(enrollment)" [disabled]="!eligibleForDocument(enrollment)">
                    {{ currentCourse?.tipo === 'Curso' ? 'Emitir certificado' : 'Emitir atestado' }}
                  </button>
                </td>
              </tr>
              <tr *ngIf="!currentCourse?.enrollments?.length">
                <td colspan="4" class="muted">Cadastre matrículas para liberar a emissão de documentos.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>

    <div class="tab-card" *ngIf="activeTab === 'dashboard'">
      <div class="tab-card__header">
        <div class="tab-card__title-stack">
          <p class="tab-card__highlight">{{ tabs[activeTabIndex].label }}</p>
          <p class="muted">Indicadores consolidados de cursos e atendimentos.</p>
        </div>
        <span class="pill">Resumo</span>
      </div>

      <div class="dashboard-controls">
        <div class="control-card">
          <div class="control-card__header">
            <div>
              <p class="control-card__eyebrow">Painéis gerenciáveis</p>
              <p class="control-card__title">Personalize os cartões exibidos</p>
              <p class="muted">Ative apenas os indicadores relevantes e ajuste a ordem de exibição.</p>
            </div>
            <span class="pill">{{ visibleWidgets.length }} / {{ dashboardWidgets.length }} ativos</span>
          </div>
          <div class="control-list">
            <label class="control-item" *ngFor="let widget of dashboardWidgets">
              <div>
                <p class="control-item__title">{{ widget.title }}</p>
                <p class="control-item__desc">{{ widget.description }}</p>
              </div>
              <div class="control-actions">
                <button type="button" class="icon-button" (click)="moveWidget(widget.id, 'up')" aria-label="Mover para cima">↑</button>
                <button type="button" class="icon-button" (click)="moveWidget(widget.id, 'down')" aria-label="Mover para baixo">↓</button>
                <label class="switch">
                  <input type="checkbox" [checked]="isWidgetEnabled(widget.id)" (change)="toggleWidget(widget.id)" />
                  <span></span>
                </label>
              </div>
            </label>
          </div>
        </div>

        <div class="insights-panel">
          <p class="insights-title">Insights rápidos</p>
          <div class="insight-chips">
            <span class="insight-chip">{{ dashboardTotals().ativosCurso }} cursos</span>
            <span class="insight-chip">{{ dashboardTotals().ativosAtendimento }} atendimentos</span>
            <span class="insight-chip">{{ dashboardSnapshot.waitlist }} em fila</span>
            <span class="insight-chip">{{ dashboardSnapshot.profissionais }} profissionais</span>
          </div>
          <div class="insight-trend">
            <div>
              <p class="trend-label">Pressão de fila</p>
              <p class="trend-value">{{ dashboardSnapshot.waitlistPressao }}%</p>
            </div>
            <div class="trend-meter">
              <div class="trend-bar" [style.width]="dashboardSnapshot.waitlistPressao + '%'" aria-hidden="true"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="widget-grid">
        <article
          class="widget-card"
          *ngFor="let widget of visibleWidgets; trackBy: trackWidget"
          [attr.data-gradient]="widget.gradient"
        >
          <div class="widget-card__header">
            <p class="widget-card__title">{{ widget.title }}</p>
            <span class="widget-card__pill">Dinâmico</span>
          </div>
          <p class="widget-card__value">{{ widget.getValue(dashboardSnapshot) }}</p>
          <p class="widget-card__helper">{{ widget.getHelper(dashboardSnapshot) }}</p>
          <div class="widget-card__progress" *ngIf="widget.getProgress">
            <div
              class="widget-card__progress-bar"
              [style.width]="widget.getProgress!(dashboardSnapshot) + '%'"
            ></div>
          </div>
        </article>
      </div>
      <ng-container *ngTemplateOutlet="navigationControls"></ng-container>
    </div>
  </form>

  <div class="list-card">
    <div class="list-card__header">
      <div>
        <p class="page-title__eyebrow">Registros</p>
        <p class="page-title__label">Cursos e Atendimentos cadastrados</p>
      </div>
    </div>
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Tipo</th>
            <th>Nome</th>
            <th>Vagas</th>
            <th>Profissional</th>
            <th>Sala</th>
            <th>Início</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let course of records">
            <td>{{ course.tipo }}</td>
            <td>{{ course.nome }}</td>
            <td>{{ course.vagasDisponiveis }} / {{ course.vagasTotais }}</td>
            <td>{{ course.profissional }}</td>
            <td>{{ getRoomName(course) }}</td>
            <td>{{ course.horarioInicial }}</td>
            <td class="table-actions">
              <button class="ghost" type="button" (click)="fillFromCourse(course)">Editar</button>
              <button class="primary" type="button" (click)="changeTab('inscricoes'); loadCourse(course.id);">Gerenciar inscrições</button>
              <button class="danger" type="button" (click)="deleteCourse(course)">Excluir</button>
            </td>
          </tr>
          <tr *ngIf="!records.length">
            <td colspan="6" class="muted">Nenhum curso ou atendimento cadastrado.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
