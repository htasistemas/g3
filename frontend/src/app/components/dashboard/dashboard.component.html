<div class="p-6 space-y-6">
  <div class="bg-gradient-to-r from-g3-green-700 to-emerald-500 text-white rounded-2xl shadow-md p-6 flex flex-col gap-2">
    <div class="flex items-center gap-3">
      <div class="bg-white/15 rounded-lg p-3">
        <span class="material-icons">dashboard_customize</span>
      </div>
      <div>
        <h1 class="text-2xl font-semibold">Visão geral</h1>
        <p class="text-white/80">Dados resumidos dos beneficiários para acompanhar tendências e prioridades.</p>
      </div>
    </div>
    <div *ngIf="error" class="bg-white/20 border border-white/30 text-white rounded-lg px-3 py-2">
      {{ error }}
    </div>
  </div>

  <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-4">
    <div class="stat-card">
      <div class="stat-card__icon bg-blue-50 text-blue-600">
        <span class="material-icons">group</span>
      </div>
      <div>
        <p class="stat-card__label">Beneficiários cadastrados</p>
        <p class="stat-card__value">{{ loading ? '...' : stats.total }}</p>
        <p class="stat-card__hint">Total de pessoas registradas no sistema.</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-card__icon bg-emerald-50 text-emerald-600">
        <span class="material-icons">verified_user</span>
      </div>
      <div>
        <p class="stat-card__label">Beneficiários ativos</p>
        <p class="stat-card__value text-emerald-700">{{ loading ? '...' : stats.active }}</p>
        <p class="stat-card__hint">Contas liberadas para atendimento.</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-card__icon bg-amber-50 text-amber-600">
        <span class="material-icons">pending_actions</span>
      </div>
      <div>
        <p class="stat-card__label">Pendências</p>
        <p class="stat-card__value text-amber-600">{{ loading ? '...' : stats.pending }}</p>
        <p class="stat-card__hint">Status pendente ou em análise.</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-card__icon bg-rose-50 text-rose-500">
        <span class="material-icons">block</span>
      </div>
      <div>
        <p class="stat-card__label">Bloqueados</p>
        <p class="stat-card__value text-rose-600">{{ loading ? '...' : stats.blocked }}</p>
        <p class="stat-card__hint">Cadastros suspensos para revisão.</p>
      </div>
    </div>
  </div>

  <div class="grid gap-4 lg:grid-cols-3">
    <div class="panel-card">
      <div class="flex items-start justify-between">
        <div>
          <p class="panel-card__label">Em análise</p>
          <p class="panel-card__value">{{ loading ? '...' : stats.inAnalysis }}</p>
        </div>
        <span class="badge badge-info">Fluxo</span>
      </div>
      <p class="panel-card__hint">Aguardando validação de dados.</p>
      <div class="progress">
        <div class="progress__bar bg-sky-500" [style.width]="stats.total ? (stats.inAnalysis / stats.total * 100) + '%' : '0%'" aria-hidden="true"></div>
      </div>
    </div>

    <div class="panel-card">
      <div class="flex items-start justify-between">
        <div>
          <p class="panel-card__label">Desatualizados / incompletos</p>
          <p class="panel-card__value">{{ loading ? '...' : stats.updated }}</p>
        </div>
        <span class="badge badge-warn">Atualizar</span>
      </div>
      <p class="panel-card__hint">Cadastros que precisam ser revisados.</p>
      <div class="progress">
        <div class="progress__bar bg-amber-500" [style.width]="stats.total ? (stats.updated / stats.total * 100) + '%' : '0%'" aria-hidden="true"></div>
      </div>
    </div>

    <div class="panel-card">
      <div class="flex items-start justify-between">
        <div>
          <p class="panel-card__label">Benefícios ativos</p>
          <p class="panel-card__value">{{ loading ? '...' : stats.withBenefits }}</p>
        </div>
        <span class="badge badge-success">Impacto</span>
      </div>
      <p class="panel-card__hint">Beneficiários marcados como recebendo benefício.</p>
      <div class="progress">
        <div class="progress__bar bg-emerald-500" [style.width]="stats.total ? (stats.withBenefits / stats.total * 100) + '%' : '0%'" aria-hidden="true"></div>
      </div>
    </div>
  </div>

  <div class="bg-white rounded-xl shadow-sm border border-slate-100 p-6">
    <div class="flex flex-col gap-2">
      <h3 class="text-lg font-semibold text-slate-800">Taxa de atividade</h3>
      <p class="text-sm text-slate-600">Proporção de cadastros ativos sobre o total.</p>
      <div class="flex items-center gap-3 mt-2">
        <div class="flex-1 h-3 rounded-full bg-slate-100 overflow-hidden">
          <div class="h-full bg-emerald-500" [style.width]="stats.total ? (stats.active / stats.total * 100) + '%' : '0%'"></div>
        </div>
        <p class="text-lg font-semibold text-emerald-700">{{ stats.total ? ((stats.active / stats.total) | percent : '1.0-1') : '0%' }}</p>
      </div>
    </div>
  </div>
</div>
