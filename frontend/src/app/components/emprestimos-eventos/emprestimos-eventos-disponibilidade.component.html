<div class="disp-grid" [formGroup]="form">
  <label class="field">Tipo de item *
    <select formControlName="tipoItem">
      <option value="PATRIMONIO">Patrimonio</option>
      <option value="ALMOXARIFADO">Almoxarifado</option>
    </select>
  </label>

  <label class="field">Item *
    <app-autocomplete
      [opcoes]="opcoesItens"
      [termo]="itemTermo"
      placeholder="Digite o item"
      (termoChange)="itemTermo = $event"
      (selecionar)="form.patchValue({ itemId: $event.id }); itemTermo = $event.label"
    ></app-autocomplete>
  </label>

  <label class="field">Quantidade *
    <input type="number" min="1" formControlName="quantidade" />
  </label>

  <label class="field">Inicio *
    <input type="datetime-local" formControlName="inicio" />
  </label>

  <label class="field">Fim *
    <input type="datetime-local" formControlName="fim" />
  </label>

  <button type="button" class="primary" (click)="consultar.emit()">Consultar</button>
</div>

<div class="resultado" *ngIf="resultado">
  <p><strong>Status:</strong> {{ resultado.disponivel ? 'Disponivel' : 'Indisponivel' }}</p>
  <p *ngIf="resultado.quantidadeDisponivel !== null && resultado.quantidadeDisponivel !== undefined">
    <strong>Quantidade disponivel:</strong> {{ resultado.quantidadeDisponivel }}
  </p>
  <div *ngIf="resultado.conflitos?.length">
    <h4>Conflitos</h4>
    <div class="conflito" *ngFor="let conflito of resultado.conflitos">
      <p><strong>Evento:</strong> {{ conflito.eventoTitulo }}</p>
      <p><strong>Periodo:</strong> {{ conflito.inicio }} ate {{ conflito.fim }}</p>
      <p><strong>Status:</strong> {{ conflito.status }}</p>
    </div>
  </div>
</div>

