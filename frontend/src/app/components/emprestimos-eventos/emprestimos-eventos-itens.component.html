<div class="itens-form" [formGroup]="form">
  <div class="itens-form__row">
    <label class="field">Tipo de item *
      <select formControlName="tipoItem">
        <option value="PATRIMONIO">Patrimonio</option>
        <option value="ALMOXARIFADO">Almoxarifado</option>
      </select>
    </label>
    <label class="field">Item *
      <app-autocomplete
        [opcoes]="opcoesItens"
        [termo]="itemTermo"
        placeholder="Digite o item"
        (termoChange)="itemTermo = $event"
        (selecionar)="form.patchValue({ itemId: $event.id }); itemTermo = $event.label"
      ></app-autocomplete>
    </label>
    <label class="field">Quantidade *
      <input type="number" min="1" formControlName="quantidade" />
    </label>
    <button type="button" class="primary" (click)="adicionar.emit()">Adicionar</button>
  </div>
</div>

<div class="itens-lista" *ngIf="itens.length; else vazio">
  <table>
    <thead>
      <tr>
        <th>Item</th>
        <th>Tipo</th>
        <th>Quantidade</th>
        <th>Status</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of itens; let i = index">
        <td>{{ item.nomeItem || item.itemId }}</td>
        <td>{{ item.tipoItem }}</td>
        <td>{{ item.quantidade }}</td>
        <td>{{ item.statusItem }}</td>
        <td><button type="button" class="ghost" (click)="remover.emit(i)">Remover</button></td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #vazio>
  <p class="muted">Nenhum item incluido.</p>
</ng-template>

