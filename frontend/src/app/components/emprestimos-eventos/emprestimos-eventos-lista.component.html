<div class="lista-header">
  <div>
    <p class="muted">Visao geral</p>
    <h3>Emprestimos cadastrados</h3>
  </div>
</div>

<div class="lista-grid" *ngIf="emprestimos.length; else vazio">
  <article class="lista-card" *ngFor="let emprestimo of emprestimos">
    <div class="lista-card__header">
      <h4>{{ emprestimo.evento.titulo || 'Evento' }}</h4>
      <span class="status-tag">{{ emprestimo.status }}</span>
    </div>
    <p class="lista-card__meta">
      Periodo: {{ emprestimo.dataRetiradaPrevista | date: 'dd/MM/yyyy HH:mm' }}
      ate {{ emprestimo.dataDevolucaoPrevista | date: 'dd/MM/yyyy HH:mm' }}
    </p>
    <p class="lista-card__meta">Responsavel: {{ emprestimo.responsavel?.nome || 'Nao informado' }}</p>
    <p class="lista-card__meta">Itens: {{ emprestimo.itens?.length || 0 }}</p>

    <div class="lista-card__actions">
      <button type="button" class="primary" (click)="abrir(emprestimo)">Abrir</button>
      <button type="button" class="ghost" (click)="confirmarRetirada.emit(emprestimo)">Confirmar retirada</button>
      <button type="button" class="ghost" (click)="confirmarDevolucao.emit(emprestimo)">Confirmar devolucao</button>
      <button type="button" class="danger" (click)="cancelar.emit(emprestimo)">Cancelar</button>
    </div>
  </article>
</div>

<ng-template #vazio>
  <p class="muted">Nenhum emprestimo cadastrado ate o momento.</p>
</ng-template>

