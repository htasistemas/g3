<div class="prontuario-filtros">
  <div class="prontuario-filtros__topo" *ngIf="mostrarBuscaBeneficiario">
    <label class="form-field">
      <span>Buscar beneficiÃ¡rio</span>
      <app-autocomplete
        [placeholder]="'Nome, CPF ou cÃ³digo'"
        [termo]="termoBusca"
        [opcoes]="opcoesBeneficiarios"
        [carregando]="carregandoBeneficiarios"
        [erro]="erroBeneficiarios"
        (termoChange)="termoBuscaChange.emit($event)"
        (selecionar)="selecionarBeneficiario.emit($event)"
      ></app-autocomplete>
    </label>
    <div class="resumo-selecionado" *ngIf="beneficiarioSelecionado">
      <span class="resumo-selecionado__label">Selecionado:</span>
      <span class="resumo-selecionado__value">{{ beneficiarioSelecionado.nomeCompleto }}</span>
    </div>
  </div>

  <div class="prontuario-filtros__grid">
    <label class="form-field">
      <span>PerÃ­odo (de)</span>
      <input
        type="date"
        class="input"
        [ngModel]="filtros.de"
        (ngModelChange)="atualizarFiltro('de', $event)"
      />
    </label>
    <label class="form-field">
      <span>PerÃ­odo (atÃ©)</span>
      <input
        type="date"
        class="input"
        [ngModel]="filtros.ate"
        (ngModelChange)="atualizarFiltro('ate', $event)"
      />
    </label>
    <label class="form-field">
      <span>Tipo</span>
      <select class="select" [ngModel]="filtros.tipo" (ngModelChange)="atualizarFiltro('tipo', $event)">
        <option value="">Todos</option>
        <option value="atendimento">Atendimento</option>
        <option value="procedimento">Procedimento</option>
        <option value="evolucao">EvoluÃ§Ã£o</option>
        <option value="encaminhamento">Encaminhamento</option>
        <option value="documento">Documento/Anexo</option>
        <option value="visita_ref">Visita domiciliar (referÃªncia)</option>
        <option value="outro">Outro</option>
      </select>
    </label>
    <label class="form-field">
      <span>Status</span>
      <select class="select" [ngModel]="filtros.status" (ngModelChange)="atualizarFiltro('status', $event)">
        <option value="">Todos</option>
        <option value="aberto">Aberto</option>
        <option value="concluido">ConcluÃ­do</option>
        <option value="cancelado">Cancelado</option>
      </select>
    </label>
    <label class="form-field">
      <span>Profissional</span>
      <select
        class="select"
        [ngModel]="filtros.profissionalId"
        (ngModelChange)="atualizarFiltro('profissionalId', toNumber($event))"
      >
        <option [ngValue]="undefined">Todos</option>
        <option *ngFor="let opcao of opcoesProfissionais" [ngValue]="opcao.id">
          {{ opcao.label }}
        </option>
      </select>
    </label>
    <label class="form-field">
      <span>Unidade</span>
      <select
        class="select"
        [ngModel]="filtros.unidadeId"
        (ngModelChange)="atualizarFiltro('unidadeId', toNumber($event))"
      >
        <option [ngValue]="undefined">Todas</option>
        <option *ngFor="let opcao of opcoesUnidades" [ngValue]="opcao.id">
          {{ opcao.label }}
        </option>
      </select>
    </label>
    <label class="form-field prontuario-filtros__texto">
      <span>Busca textual</span>
      <input
        type="text"
        class="input"
        [ngModel]="filtros.texto"
        (ngModelChange)="atualizarFiltro('texto', $event)"
        placeholder="Pesquisar no histÃ³rico"
      />
    </label>
    <div class="prontuario-filtros__acoes">
      <button type="button" class="ghost" (click)="limparFiltros()">Limpar filtros</button>
    </div>
  </div>
</div>

