<div class="version-page">
  <header class="page-title page-title--row">
    <div>
      <p class="page-title__eyebrow">CONFIGURACOES GERAIS</p>
      <p class="page-title__label">Versao do Sistema</p>
    </div>
    <p class="page-title__note">Consulta e atualizacao da versao do sistema.</p>
  </header>
  <div class="version-header">
    <div class="version-header__info">
      <p class="subtitle">Acompanhe a versão atual e o histórico das últimas entregas.</p>
    </div>
    <div class="version-chip">
      <span>Versão atual</span>
      <strong *ngIf="!carregandoVersao && currentVersion">{{ currentVersion }}</strong>
      <strong *ngIf="carregandoVersao">Carregando...</strong>
      <strong *ngIf="!carregandoVersao && !currentVersion">--</strong>
    </div>
  </div>

  <section class="version-card">
    <div class="card__header">
      <div>
        <p class="card__eyebrow">Detalhes</p>
        <h2>Informações da release</h2>
        <p class="card__subtitle">Número da versão, origem e anotações rápidas.</p>
      </div>
      <div class="card__meta">
        <p class="meta-label">Identificador técnico</p>
        <p class="meta-value">{{ currentVersion }}</p>
      </div>
    </div>

    <div class="version-update">
      <div>
        <p class="version-update__label">Versão atual</p>
        <p class="version-update__value">{{ currentVersion || '--' }}</p>
      </div>
      <div>
        <p class="version-update__label">Versão disponível</p>
        <p class="version-update__value">{{ versaoDisponivel || '--' }}</p>
      </div>
      <div class="version-update__actions">
        <span class="version-update__feedback" *ngIf="feedbackAtualizacao">{{
          feedbackAtualizacao
        }}</span>
      </div>
    </div>

    <div class="release-list">
      <div class="release-list__header">
        <span>Versão</span>
        <span>Data/Hora</span>
        <span>Resumo</span>
      </div>
      <p *ngIf="erroHistorico" class="release-empty">{{ erroHistorico }}</p>
      <p *ngIf="!erroHistorico && carregandoHistorico" class="release-empty">Carregando historico...</p>
      <p *ngIf="!erroHistorico && !carregandoHistorico && historicoVersoes.length === 0" class="release-empty">
        Nenhuma atualizacao registrada.
      </p>

      <article class="release-row" *ngFor="let item of historicoPaginado">
        <span class="release-row__version">{{ item.versao }}</span>
        <span class="release-row__date">{{ formatarDataHora(item.criadoEm) }}</span>
        <ul class="release-row__highlights">
          <li *ngIf="item.descricao">{{ item.descricao }}</li>
          <li *ngIf="!item.descricao">Sem resumo informado.</li>
        </ul>
      </article>

      <div
        class="release-pagination"
        *ngIf="!erroHistorico && !carregandoHistorico && historicoVersoes.length > itensPorPagina"
      >
        <button
          type="button"
          class="release-pagination__button"
          [disabled]="paginaAtual === 1"
          (click)="voltarPagina()"
          aria-label="Pagina anterior"
        >
          ◀
        </button>
        <span class="release-pagination__status">
          Pagina {{ paginaAtual }} de {{ totalPaginas }}
        </span>
        <button
          type="button"
          class="release-pagination__button"
          [disabled]="paginaAtual === totalPaginas"
          (click)="avancarPagina()"
          aria-label="Proxima pagina"
        >
          ▶
        </button>
      </div>
    </div>
  </section>
</div>


