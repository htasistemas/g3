{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/api/chamada-api.service\";\nimport * as i2 from \"../../core/api/beneficiario-api.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction OperadorChamadasComponent_option_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const beneficiario_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", beneficiario_r4.idBeneficiario);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", beneficiario_r4.nomeBeneficiario, \" \");\n  }\n}\nfunction OperadorChamadasComponent_p_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.mensagem);\n  }\n}\nfunction OperadorChamadasComponent_tr_41_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function OperadorChamadasComponent_tr_41_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const item_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.chamar(item_r5));\n    });\n    i0.ɵɵtext(10, \"Chamar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.nomeBeneficiario);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.prioridade);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(7, 3, item_r5.dataHoraEntrada, \"dd/MM/yyyy HH:mm\"));\n  }\n}\nfunction OperadorChamadasComponent_tr_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 18);\n    i0.ɵɵtext(2, \"Nenhum beneficiario aguardando.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let OperadorChamadasComponent = /*#__PURE__*/(() => {\n  class OperadorChamadasComponent {\n    constructor(chamadaApi, beneficiarioApi) {\n      this.chamadaApi = chamadaApi;\n      this.beneficiarioApi = beneficiarioApi;\n      this.filaAguardando = [];\n      this.beneficiarios = [];\n      this.carregando = false;\n      this.carregandoBeneficiarios = false;\n      this.mensagem = null;\n      this.localAtendimento = 'Guiche 02';\n      this.beneficiarioSelecionadoId = null;\n      this.prioridadeEntrada = 0;\n    }\n    ngOnInit() {\n      this.carregarBeneficiarios();\n      this.carregarFila();\n    }\n    carregarBeneficiarios() {\n      this.carregandoBeneficiarios = true;\n      this.beneficiarioApi.listar().subscribe({\n        next: lista => {\n          this.beneficiarios = lista;\n          this.carregandoBeneficiarios = false;\n        },\n        error: () => {\n          this.mensagem = 'Nao foi possivel carregar os beneficiarios.';\n          this.carregandoBeneficiarios = false;\n        }\n      });\n    }\n    carregarFila() {\n      this.carregando = true;\n      this.mensagem = null;\n      this.chamadaApi.listarFilaAguardando().subscribe({\n        next: fila => {\n          this.filaAguardando = fila;\n          this.carregando = false;\n        },\n        error: () => {\n          this.carregando = false;\n          this.mensagem = 'Nao foi possivel carregar a fila.';\n        }\n      });\n    }\n    entrarFila() {\n      if (!this.beneficiarioSelecionadoId) {\n        this.mensagem = 'Selecione um beneficiario para inserir na fila.';\n        return;\n      }\n      const prioridade = this.prioridadeEntrada ?? 0;\n      this.chamadaApi.entrarFila(this.beneficiarioSelecionadoId, prioridade).subscribe({\n        next: () => {\n          this.mensagem = 'Beneficiario inserido na fila.';\n          this.beneficiarioSelecionadoId = null;\n          this.prioridadeEntrada = 0;\n          this.carregarFila();\n        },\n        error: () => {\n          this.mensagem = 'Nao foi possivel inserir o beneficiario na fila.';\n        }\n      });\n    }\n    chamar(item) {\n      if (!this.localAtendimento.trim()) {\n        this.mensagem = 'Informe o local de atendimento.';\n        return;\n      }\n      this.chamadaApi.chamar(item.idFilaAtendimento, this.localAtendimento).subscribe({\n        next: () => {\n          this.mensagem = `Beneficiario chamado para ${this.localAtendimento}.`;\n          this.carregarFila();\n        },\n        error: () => {\n          this.mensagem = 'Nao foi possivel chamar o beneficiario.';\n        }\n      });\n    }\n    static {\n      this.ɵfac = function OperadorChamadasComponent_Factory(t) {\n        return new (t || OperadorChamadasComponent)(i0.ɵɵdirectiveInject(i1.ChamadaApiService), i0.ɵɵdirectiveInject(i2.BeneficiarioApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: OperadorChamadasComponent,\n        selectors: [[\"app-operador-chamadas\"]],\n        decls: 43,\n        vars: 8,\n        consts: [[1, \"operador\"], [1, \"operador__header\"], [1, \"operador__eyebrow\"], [1, \"muted\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [1, \"operador__acoes\"], [\"type\", \"text\", \"placeholder\", \"Guiche 02\", 3, \"ngModel\", \"ngModelChange\"], [1, \"operador__entrada\"], [3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"number\", \"min\", \"0\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", \"btn--primary\", 3, \"click\"], [\"class\", \"mensagem\", 4, \"ngIf\"], [1, \"tabela\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"mensagem\"], [\"colspan\", \"4\", 1, \"vazio\"]],\n        template: function OperadorChamadasComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\", 1)(2, \"div\")(3, \"p\", 2);\n            i0.ɵɵtext(4, \"ATENDIMENTO\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"h1\");\n            i0.ɵɵtext(6, \"Painel do Operador\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"p\", 3);\n            i0.ɵɵtext(8, \"Fila de beneficiarios aguardando chamada.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"button\", 4);\n            i0.ɵɵlistener(\"click\", function OperadorChamadasComponent_Template_button_click_9_listener() {\n              return ctx.carregarFila();\n            });\n            i0.ɵɵtext(10, \"Atualizar\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(11, \"div\", 5)(12, \"label\");\n            i0.ɵɵtext(13, \" Local de atendimento \");\n            i0.ɵɵelementStart(14, \"input\", 6);\n            i0.ɵɵlistener(\"ngModelChange\", function OperadorChamadasComponent_Template_input_ngModelChange_14_listener($event) {\n              return ctx.localAtendimento = $event;\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(15, \"div\", 7)(16, \"label\");\n            i0.ɵɵtext(17, \" Beneficiario \");\n            i0.ɵɵelementStart(18, \"select\", 8);\n            i0.ɵɵlistener(\"ngModelChange\", function OperadorChamadasComponent_Template_select_ngModelChange_18_listener($event) {\n              return ctx.beneficiarioSelecionadoId = $event;\n            });\n            i0.ɵɵelementStart(19, \"option\", 9);\n            i0.ɵɵtext(20, \"Selecione um beneficiario\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(21, OperadorChamadasComponent_option_21_Template, 2, 2, \"option\", 10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(22, \"label\");\n            i0.ɵɵtext(23, \" Prioridade \");\n            i0.ɵɵelementStart(24, \"input\", 11);\n            i0.ɵɵlistener(\"ngModelChange\", function OperadorChamadasComponent_Template_input_ngModelChange_24_listener($event) {\n              return ctx.prioridadeEntrada = $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(25, \"button\", 12);\n            i0.ɵɵlistener(\"click\", function OperadorChamadasComponent_Template_button_click_25_listener() {\n              return ctx.entrarFila();\n            });\n            i0.ɵɵtext(26, \"Inserir na fila\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(27, OperadorChamadasComponent_p_27_Template, 2, 1, \"p\", 13);\n            i0.ɵɵelementStart(28, \"div\", 14)(29, \"table\")(30, \"thead\")(31, \"tr\")(32, \"th\");\n            i0.ɵɵtext(33, \"Beneficiario\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"th\");\n            i0.ɵɵtext(35, \"Prioridade\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(36, \"th\");\n            i0.ɵɵtext(37, \"Entrada\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(38, \"th\");\n            i0.ɵɵtext(39, \"Acoes\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(40, \"tbody\");\n            i0.ɵɵtemplate(41, OperadorChamadasComponent_tr_41_Template, 11, 6, \"tr\", 15);\n            i0.ɵɵtemplate(42, OperadorChamadasComponent_tr_42_Template, 3, 0, \"tr\", 16);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(14);\n            i0.ɵɵproperty(\"ngModel\", ctx.localAtendimento);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.beneficiarioSelecionadoId);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngValue\", null);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.beneficiarios);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngModel\", ctx.prioridadeEntrada);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.mensagem);\n            i0.ɵɵadvance(14);\n            i0.ɵɵproperty(\"ngForOf\", ctx.filaAguardando);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.carregando && ctx.filaAguardando.length === 0);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.MinValidator, i4.NgModel, i3.DatePipe],\n        styles: [\".operador[_ngcontent-%COMP%]{max-width:1100px;margin:2rem auto;padding:0 1rem}.operador__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;align-items:flex-start}.operador__eyebrow[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b;margin:0}.operador__acoes[_ngcontent-%COMP%]{margin:1rem 0;display:flex;gap:1rem}.operador__entrada[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;align-items:end;margin-bottom:1rem}.operador__acoes[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .operador__entrada[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem;font-weight:600}.operador__acoes[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .operador__entrada[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .operador__entrada[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem .75rem;border:1px solid #cbd5e1;border-radius:8px}.btn[_ngcontent-%COMP%]{padding:.5rem .9rem;border-radius:8px;border:1px solid #cbd5e1;background:#fff;cursor:pointer;font-weight:700}.btn--primary[_ngcontent-%COMP%]{background:#0f7a43;border-color:#0f7a43;color:#fff}.mensagem[_ngcontent-%COMP%]{background:#fef9c3;border:1px solid #fde68a;padding:.5rem .75rem;border-radius:8px}.tabela[_ngcontent-%COMP%]{margin-top:1rem;background:#fff;border-radius:12px;border:1px solid #e2e8f0;overflow:hidden}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.75rem;border-bottom:1px solid #e2e8f0;text-align:left}th[_ngcontent-%COMP%]{background:#f8fafc;color:#64748b;font-size:.85rem}.vazio[_ngcontent-%COMP%]{text-align:center;color:#94a3b8}.muted[_ngcontent-%COMP%]{color:#64748b}\"]\n      });\n    }\n  }\n  return OperadorChamadasComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}