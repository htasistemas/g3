{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/api/chamada-api.service\";\nimport * as i2 from \"../../core/realtime/chamada-realtime.service\";\nimport * as i3 from \"@angular/common\";\nfunction PainelSenhaComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"h1\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.chamadaAtual == null ? null : ctx_r0.chamadaAtual.nomeBeneficiario);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Dirija-se ao \", ctx_r0.chamadaAtual == null ? null : ctx_r0.chamadaAtual.localAtendimento, \"\");\n  }\n}\nfunction PainelSenhaComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"h1\");\n    i0.ɵɵtext(2, \"Nenhuma chamada\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 5);\n    i0.ɵɵtext(4, \"Aguardando proxima chamada.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let PainelSenhaComponent = /*#__PURE__*/(() => {\n  class PainelSenhaComponent {\n    constructor(chamadaApi, realtime) {\n      this.chamadaApi = chamadaApi;\n      this.realtime = realtime;\n      this.chamadaAtual = null;\n      this.assinatura = null;\n    }\n    ngOnInit() {\n      this.chamadaApi.ultimaChamada().subscribe({\n        next: chamada => {\n          this.chamadaAtual = chamada;\n        },\n        error: () => {\n          this.chamadaAtual = null;\n        }\n      });\n      this.assinatura = this.realtime.conectar().subscribe(evento => {\n        if (evento?.evento === 'CHAMADA_BENEFICIARIO') {\n          this.chamadaAtual = {\n            idChamada: evento.dados.idChamada,\n            idFilaAtendimento: 0,\n            nomeBeneficiario: evento.dados.nomeBeneficiario,\n            localAtendimento: evento.dados.localAtendimento,\n            statusChamada: 'CHAMADO',\n            dataHoraChamada: evento.dados.dataHoraChamada\n          };\n        }\n      });\n    }\n    ngOnDestroy() {\n      this.assinatura?.unsubscribe();\n      this.realtime.desconectar();\n    }\n    static {\n      this.ɵfac = function PainelSenhaComponent_Factory(t) {\n        return new (t || PainelSenhaComponent)(i0.ɵɵdirectiveInject(i1.ChamadaApiService), i0.ɵɵdirectiveInject(i2.ChamadaRealtimeService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PainelSenhaComponent,\n        selectors: [[\"app-painel-senha\"]],\n        decls: 7,\n        vars: 2,\n        consts: [[1, \"painel\"], [1, \"painel__header\"], [\"class\", \"painel__conteudo\", 4, \"ngIf\", \"ngIfElse\"], [\"vazio\", \"\"], [1, \"painel__conteudo\"], [1, \"painel__local\"]],\n        template: function PainelSenhaComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"p\");\n            i0.ɵɵtext(3, \"CHAMADA\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(4, PainelSenhaComponent_div_4_Template, 5, 2, \"div\", 2);\n            i0.ɵɵtemplate(5, PainelSenhaComponent_ng_template_5_Template, 5, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            const _r1 = i0.ɵɵreference(6);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.chamadaAtual)(\"ngIfElse\", _r1);\n          }\n        },\n        dependencies: [i3.NgIf],\n        encapsulation: 2\n      });\n    }\n  }\n  return PainelSenhaComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}